{"version":3,"sources":["images/wreath.png","components/MeshCreation.js","components/SnowEffect.js","components/explosionConfetti2.js","images/advent_background.png","images/advent_background_rear.png","images/cardboard_back.jpg","sounds/test.mp3","sounds/test2.mp3","sounds/test3.mp3","sounds/cheering.mp3","components/Calendar3D.js","images/advent_side_left.png","images/advent_side_right.png","images/advent_side_top.png","images/advent_side_bottom.png","images/modal_decor.png","components/SettingsModal.js","App.js","reportWebVitals.js","index.js"],"names":["CALENDAR_WIDTH","CALENDAR_HEIGHT","CALENDAR_INSIDE_COLOUR","BASE_WIDTH","BASE_HEIGHT","OUTLINE_L_MARGIN","OUTLINE_B_MARGIN","fold_width","stagger_val","createDoorMesh","i","geom","THREE","vertices","push","faces","fp","fold_triangle_width_fraction","createDoorOutline","row","col","texture","doorOutlinePointsTop","doorOutlinePointsBottom","number_of_folds","l","uv_array","uv_x","uv_y","vertex_id","face","stagger","offset_position_x","offset_position_y","face_id","length","a","x","y","b","c","faceVertexUvs","material_outline","map","wireframe","side","mesh_outline","position","set","doorOutlinePoints","concat","reverse","doorOutlineGeom","setFromPoints","doorOutlineMaterial","color","line","createDoor","texture_front","texture_back","geometry","computeFaceNormals","computeVertexNormals","uvsNeedUpdate","bufferGeometry","fromGeometry","attributes","vertex","skinIndices","skinWeights","count","fromBufferAttribute","skinIndex","Math","floor","setAttribute","material_front","skinning","material_back","meshFront","meshBack","skeleton","bones","bone","prevBone","add","tab_width_fraction","createDoorSkeleton","rootBone","bind","createSidePanelLeft","material","offset","createSidePanelRight","createSidePanelTop","createSidePanelBottom","maxRange","minRange","pointGeometry","random","z","particle","pointMaterial","size","vertexColors","canvas","document","createElement","ctx","getContext","width","height","canvasRadius","canvasW","canvasH","save","gradient","createRadialGradient","addColorStop","fillStyle","fillRect","restore","drawRadialGradation","diameter","type","needsUpdate","getTexture","transparent","fog","depthWrite","velocities","snowEffectParticles","Drandom","number","DrandomFromTo","from","to","DrandomPlusMinus","val","ExplosionConfetti","options","rotation","_options","amount","radius","areaWidth","areaHeight","fallingHeight","fallingSpeed","colors","object","toObject","obj","JSON","parse","stringify","key","objectMerge","array","boom","life","destination","scale","rotateSpeedX","rotateSpeedY","rotateSpeedZ","dispose","children","remove","parent","update","k","speedX","speedY","speedZ","Calendar3D","props","state","play","this","front_texture","load","advent_background","back_texture","advent_background_rear","side_texture_left","side_texture_right","side_texture_top","side_texture_bottom","rear_texture","cardboard_rear","confetti_group","doorStates","open","isMoving","panelSound","masterValue","loadSound","src","sound","style","display","body","appendChild","cardboardSound1","sound1","cardboardSound2","sound2","cardboardSound3","sound3","cardboardSound4","sound4","cardboardSound5","sound5","cheerSound","sound_cheer","renderer","alpha","autoClearColor","setSize","window","innerWidth","innerHeight","domElement","scene","camera","controls","OrbitControls","minDistance","maxDistance","keys","LEFT","UP","RIGHT","BOTTOM","minPolarAngle","PI","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","minPan","maxPan","addEventListener","v","copy","target","clamp","sub","frontPanel","j","door_points_lists","HEIGHT","positions","positions_array","triangles","Delaunator","triangle","add_face","door_points","includes","createAdventFrontPanel","sidePanelLeft","sidePanelLeft_inner","sidePanelRight","sidePanelRight_inner","sidePanelTop","sidePanelTop_inner","sidePanelBottom","sidePanelBottom_inner","rearPanel","backMesh","createBackPanel","doorArrays","doorsAndOutlineArray","doorArrayFront","doorArrayBack","doorPositions","door","door_id","helper","door_outline","testDragGeom","testDragMat","visible","testDragMesh","testDragPanel","setPixelRatio","devicePixelRatio","aspect","updateProjectionMatrix","raycaster","checkMouseIntersection","event","intersects","mouse","clientX","clientY","touches","currentDoor","currentDoor_initialx","currentDoor_initialMasterValue","anyDoorMoving","setFromCamera","intersectObjects","initialDoorMasterValue","drag_intersect","enableRotate","point","openDoor","endOpenDoor","time","abs","TWEEN","easing","Sinusoidal","Out","onUpdate","adjustDoorAngle","onComplete","start","removeEventListener","initial_x","initial_door","min","max","adjustDoorBoneAngle","value","getSliderValue","frac","outcome","pause","currentTime","confetti_r","confetti_l","sliderObj","indexUpper","findIndex","indexLower","fraction","isMouseDragging","isCameraPosMoving","isCameraRotMoving","isDragging","stopDragCheck","stopWheelZoom","e","preventDefault","moveToDoor","target_pos","target_controls","enabled","Quadratic","In","animate","timeStamp","requestAnimationFrame","particles","posArr","velArr","forEach","velocity","velX","sin","velZ","cos","verticesNeedUpdate","updateSnowEffectParticles","render","setState","id","ref","React","Component","SettingsModal","show","Button","variant","onClick","pauseAnimation","buttonStyle","Modal","onHide","playAnimation","dialogClassName","aria-labelledby","decor","alt","Header","closeButton","Title","Body","App","className","wreath","top","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"oQAAe,MAA0B,mC,+BCGnCA,EAAiB,GACjBC,EAAkB,GAGlBC,EAAyB,QAUzBC,EAAa,IACbC,EAAc,IAGdC,EAAmB,IAGnBC,EAAmB,IAEnBC,EAAaJ,GAEbK,GAAe,GAErB,SAASC,IAER,IACIC,EADAC,EAAO,IAAIC,IAGf,IAAKF,EAAI,EAAGA,EA1BW,EA0BUA,IACtB,IAANA,IACHC,EAAKE,SAASC,KAAK,IAAIF,IAAeF,EAAEH,EAAY,EAAG,IACvDI,EAAKE,SAASC,KAAK,IAAIF,IAAeF,EAAEH,EAAYH,EAAa,KAElEO,EAAKE,SAASC,KAAK,IAAIF,KAAgBF,EAAE,GAAGH,EAAY,EAAG,IAC3DI,EAAKE,SAASC,KAAK,IAAIF,KAAgBF,EAAE,GAAGH,EAAYH,EAAa,IAErEO,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAEF,EAAG,EAAEA,EAAI,EAAG,EAAEA,EAAI,IACrDC,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAEF,EAAG,EAAEA,EAAI,EAAG,EAAEA,EAAI,IAItD,IAAIM,EAAK,GAoBT,IAhBAL,EAAKE,SAASC,KAAK,IAAIF,IAAeT,EAAYC,KAAmD,IACrGO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,EAAYC,KAAmD,IACrGO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA4CC,KAAmD,IACrIO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA4CC,KAAmD,IACrIO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,EAAYC,KAAyF,IAC3IO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,EAAYC,MAAyF,IAE3IO,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAIA,EAAK,EAAGA,EAAK,IAClDL,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAIA,EAAK,EAAGA,EAAK,IAClDL,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAK,EAAGA,EAAK,EAAGA,EAAK,IACtDL,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAIA,EAAK,EAAGA,EAAK,IAGlDA,EAAK,GAGAN,EAAI,EAAGA,EA3DW,EA2DUA,IAChCC,EAAKE,SAASC,KAAK,IAAIF,IAAeF,EAAEH,EAAYH,MAAgD,IACpGO,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,KAA0Cb,MAAgD,IACtJO,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,KAA0Cb,EAAa,IAEnHO,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAEF,EAAE,EAAGM,EAAG,EAAEN,EAAGM,EAAG,EAAEN,EAAE,IACvDC,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAG,EAAEN,EAAGM,EAAG,EAAEN,EAAE,EAAGM,EAAG,EAAEN,EAAE,IAC1DC,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAG,EAAEN,EAAE,EAAG,EAAEA,EAAE,EAAGM,EAAG,EAAEN,EAAE,IAEzDC,EAAKE,SAASC,KAAK,IAAIF,IAAeF,EAAEH,GAAY,KAAsC,IAC1FI,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,MAA0C,KAAsC,IAC5IN,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,KAA0C,EAAG,IAEzGN,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAEF,EAAE,EAAGM,EAAG,EAAEN,EAAE,EAAGM,EAAG,EAAEN,EAAE,IACzDC,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAG,EAAEN,EAAE,EAAGM,EAAG,EAAEN,EAAE,EAAGM,EAAG,EAAEN,EAAE,IAC5DC,EAAKI,MAAMD,KAAK,IAAIF,IAAaI,EAAG,EAAEN,EAAE,EAAG,EAAEA,EAAE,EAAGM,EAAG,EAAEN,EAAE,IAG1D,OAAOC,EAGR,SAASO,EAAkBC,EAAKC,EAAKC,GACpC,IAAIV,EAAO,IAAIC,IACXU,EAAuB,GACvBC,EAA0B,GAE9BZ,EAAKE,SAASC,KAAK,IAAIF,KAAe,KAAoB,IAAoB,IAC9ED,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAoBR,KAA8B,IACxFO,EAAKE,SAASC,KAAK,IAAIF,IAAe,GAAG,IAAoB,IAC7DD,EAAKE,SAASC,KAAK,IAAIF,IAAe,EAAGR,KAA8B,IAEvEO,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IACvCD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAEvCD,EAAKE,SAASC,KAAK,IAAIF,IAAe,GAAG,KAAsC,IAC/ED,EAAKE,SAASC,KAAK,IAAIF,IAAe,EAAGR,MAAgD,IAGzFmB,EAAwBT,KAAK,IAAIF,IAAe,GAAG,KAAsC,IACzFU,EAAqBR,KAAK,IAAIF,IAAe,EAAGR,MAAgD,IAGhG,IAAK,IAAIM,EAAI,EAAGA,EArGO,EAqGcA,IAAK,CAEzCC,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,MAA0C,IAAoB,IAC1HN,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,MAA0C,KAAsC,IAC5IN,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAa,EAAG,IAE7DgB,EAAwBT,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,MAA0C,KAAsC,IACtJM,EAAwBT,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAa,EAAG,IAEvEI,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,KAA0Cb,KAA8B,IACpIO,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,KAA0Cb,MAAgD,IACtJO,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAaH,EAAa,IAEvEkB,EAAqBR,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAeU,KAA0Cb,MAAgD,IAC7JkB,EAAqBR,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAaH,EAAa,IAE9EO,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,GAAa,IAAoB,IAC9EI,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAaH,KAA8B,IAExFO,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,GAAa,KAAsC,IAChGI,EAAKE,SAASC,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAaH,MAAgD,IAEtGM,EAAIc,IACPD,EAAwBT,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,GAAa,KAAsC,IAC1Ge,EAAqBR,KAAK,IAAIF,KAAiBF,EAAE,GAAGH,EAAaH,MAAgD,KAGlH,IAAIqB,EAjCI,EAiCG,GAAGf,EAEdC,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,IAC3Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,IAC3Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAGA,EAAE,EAAGA,EAAE,IAC3Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAE7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAI9Cd,EAAKE,SAASC,KAAK,IAAIF,IAAeT,EAAYC,KAAyF,IAC3IO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA4CC,KAAmD,IACrIO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA4CC,KAAyF,IAC3KO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,MAA4C,IAAoB,IAEtGoB,EAAwBT,KAAK,IAAIF,IAAeT,EAAYC,KAAyF,IACrJmB,EAAwBT,KAAK,IAAIF,IAAeT,KAA4CC,KAAmD,IAE/IO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,EAAYC,MAAyF,IAC3IO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA4CC,KAAmD,IACrIO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA4CC,MAAyF,IAC3KO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA4CC,KAA8B,IAEhHkB,EAAqBR,KAAK,IAAIF,IAAeT,EAAYC,MAAyF,IAClJkB,EAAqBR,KAAK,IAAIF,IAAeT,KAA4CC,KAAmD,IAE5IO,EAAKE,SAASC,KAAK,IAAIF,IAAeT,MAA+B,IAAoB,IACzFQ,EAAKE,SAASC,KAAK,IAAIF,IAAeT,KAA+BC,KAA8B,IAEnGqB,EAAIT,GAEJL,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAGA,EAAE,EAAGA,EAAE,IAC3Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAGA,EAAE,EAAGA,EAAE,IAC3Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAGA,EAAE,EAAGA,EAAE,IAE3Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAE7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAC7Cd,EAAKI,MAAMD,KAAK,IAAIF,IAAaa,EAAE,EAAGA,EAAE,EAAGA,EAAE,IAW7C,IATA,IAIIC,EACAC,EACAC,EACAC,EACAC,EARAC,EAAUvB,GAAaY,EAAI,GAC3BY,EAA6C,EAAJZ,EAArB,IAA4Bf,EAChD4B,EAAoBhC,GAA2B,GAAPkB,EAAI,GAAMb,EAAmByB,EAO/DG,EAAU,EAAGA,EAAUvB,EAAKI,MAAMoB,OAAQD,IAEnDR,EAAW,GAEXG,GAHAC,EAAOnB,EAAKI,MAAMmB,IAGDE,EACjBT,GAAQ3B,KAAoBW,EAAKE,SAASgB,GAAWQ,EAAIL,IAAsBhC,EAC/E4B,GAAS3B,IAAqBU,EAAKE,SAASgB,GAAWS,EAAIL,IAAsBhC,EACjFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IACtCC,EAAYC,EAAKS,EACjBZ,GAAQ3B,KAAoBW,EAAKE,SAASgB,GAAWQ,EAAIL,IAAsBhC,EAC/E4B,GAAS3B,IAAqBU,EAAKE,SAASgB,GAAWS,EAAIL,IAAsBhC,EACjFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IACtCC,EAAYC,EAAKU,EACjBb,GAAQ3B,KAAoBW,EAAKE,SAASgB,GAAWQ,EAAIL,IAAsBhC,EAC/E4B,GAAS3B,IAAqBU,EAAKE,SAASgB,GAAWS,EAAIL,IAAsBhC,EACjFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IAGtCjB,EAAK8B,cAAc,GAAG3B,KAAKY,GAG5B,IAAMgB,EAAmB,IAAI9B,IAAyB,CAAE+B,IAAKtB,EAASuB,WAAW,EAAOC,KAAMjC,MAGxFkC,EAAe,IAAIlC,IAAYD,EAAM+B,GAG3CI,EAAaC,SAASC,IAA6B,EAAJ5B,EAArB,IAA4Bf,EAAkBJ,GAA2B,GAAPkB,EAAI,GAAMb,EAAmByB,EAAS,GAElI,IAAIkB,EAAoB3B,EAAqB4B,OAAO3B,EAAwB4B,WAEtEC,GAAkB,IAAIxC,KAAuByC,cAAeJ,GAC5DK,EAAsB,IAAI1C,IAAyB,CAAE2C,MAAO,IAC5DC,EAAO,IAAI5C,IAAYwC,EAAiBE,GAI9C,OAFAE,EAAKT,SAASC,IAA6B,EAAJ5B,EAArB,IAA4Bf,EAAkBJ,GAA2B,GAAPkB,EAAI,GAAMb,EAAmByB,EAAS,MAEnH,CAACe,EAAcU,GAiCvB,SAASC,EAAWtC,EAAKC,EAAKsC,EAAeC,GAY5C,IAXA,IAMIjC,EACAC,EACAC,EACAC,EACAC,EAVE8B,EAAW,IAAInD,EAGjBuB,EAA6C,EAAJZ,EAArB,IAA4Bf,EAChD4B,EAAoBhC,GAA2B,GAAPkB,EAAI,GAAMb,EAFxCE,GAAaY,EAAI,GASrBc,EAAU,EAAGA,EAAU0B,EAAS7C,MAAMoB,OAAQD,IAEvDR,EAAW,GAEXG,GAHAC,EAAO8B,EAAS7C,MAAMmB,IAGLE,EACjBT,GAAQ3B,KAAoB4D,EAAS/C,SAASgB,GAAWQ,EAAIL,IAAsBhC,EACnF4B,GAAS3B,IAAqB2D,EAAS/C,SAASgB,GAAWS,EAAIL,IAAsBhC,EACrFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IACtCC,EAAYC,EAAKS,EACjBZ,GAAQ3B,KAAoB4D,EAAS/C,SAASgB,GAAWQ,EAAIL,IAAsBhC,EACnF4B,GAAS3B,IAAqB2D,EAAS/C,SAASgB,GAAWS,EAAIL,IAAsBhC,EACrFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IACtCC,EAAYC,EAAKU,EACjBb,GAAQ3B,KAAoB4D,EAAS/C,SAASgB,GAAWQ,EAAIL,IAAsBhC,EACnF4B,GAAS3B,IAAqB2D,EAAS/C,SAASgB,GAAWS,EAAIL,IAAsBhC,EACrFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IAGtCgC,EAASnB,cAAc,GAAG3B,KAAKY,GAGhCkC,EAASC,qBACTD,EAASE,uBACTF,EAASG,eAAgB,EAWzB,IATA,IAAIC,GAAiB,IAAIpD,KAAuBqD,aAAcL,GAExDb,EAAWiB,EAAeE,WAAWnB,SAErCoB,EAAS,IAAIvD,IAEbwD,EAAc,GACdC,EAAc,GAEV3D,EAAI,EAAGA,EAAIqC,EAASuB,MAAO5D,IAAO,CAE3CyD,EAAOI,oBAAqBxB,EAAUrC,GAGtC,IAAM8D,EAAYC,KAAKC,MAAOP,EAAO9B,EAAI9B,GAIzC6D,EAAYtD,KAAM0D,EAAWA,EAAY,EAAG,EAAG,GAC/CH,EAAYvD,KAAM,EAHC,EAG2B,EAAG,GAIlDkD,EAAeW,aAAc,YAAa,IAAI/D,IAA6BwD,EAAa,IACxFJ,EAAeW,aAAc,aAAc,IAAI/D,IAA8ByD,EAAa,IAG1F,IAAMO,EAAiB,IAAIhE,IAAyB,CAAE+B,IAAKe,EAAed,WAAW,EAAOC,KAAMjC,IAAgBiE,UAAU,IAGtHC,EAAgB,IAAIlE,IAAyB,CAAE+B,IAAKgB,EAAcf,WAAW,EAAOC,KAAMjC,IAAiBiE,UAAU,IAEvHE,EAAY,IAAInE,IAAmBoD,EAAgBY,GACnDI,EAAW,IAAIpE,IAAmBoD,EAAgBc,GAEhDG,EAtGP,WAEC,IAAIC,EAAQ,GACRC,EAAO,IAAIvE,IACfuE,EAAKpC,SAASV,EAAI,EAClB8C,EAAKpC,SAAST,EAAI,GAClB4C,EAAMpE,KAAKqE,GAGX,IADA,IAAIC,EAAWD,EACNzE,EAAI,EAAGA,EA1OO,EA0OcA,KACpCyE,EAAO,IAAIvE,KACNmC,SAASV,EAAI9B,EAElB2E,EAAMpE,KAAKqE,GACXC,EAASC,IAAKF,GACdC,EAAWD,EAYZ,OARAA,EAAO,IAAIvE,KACNmC,SAASV,EAAIiD,mBAElBJ,EAAMpE,KAAKqE,GACXC,EAASC,IAAKF,GAEG,IAAIvE,IAAgBsE,GA6EpBK,GACXC,EAAWP,EAASC,MAAO,GAqBjC,OApBAH,EAAUM,IAAKG,GACfT,EAAUU,KAAMR,GAChBD,EAASK,IAAKG,GACdR,EAASS,KAAMR,GAUfF,EAAUhC,SAASC,IAAIhB,EAAmBC,EAAmB,GAC7D+C,EAASjC,SAASC,IAAIhB,EAAmBC,EAAmB,GAMrD,CAAC8C,EAAWC,EADA,CAAChD,EAAoB7B,IAAc8B,EAAoB7B,MAyH3E,SAASsF,EAAoBrE,GAC5B,IAIIsE,EADAC,EAAS,EAERvE,EAIJsE,EAAW,IAAI/E,IAAyB,CAAE+B,IAAKtB,EAASuB,WAAW,EAAOC,KAAMjC,OAHhFgF,EAAS,IACTD,EAAW,IAAI/E,IAAyB,CAAE2C,MAAOrD,EAAwB0C,WAAW,EAAOC,KAAMjC,OAKlG,IAAID,EAAO,IAAIC,IAcf,OAbAD,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAUgF,GAAQ,IAvelC,IAwetBjF,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAUgF,EAAQ,IAxelC,IAyetBjF,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAUgF,GAAQ,GAAY,IACpEjF,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAUgF,EAAQ,GAAY,IAEpEjF,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAChGD,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAEhGD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IACvCD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAExB,IAAIA,IAAWD,EAAMgF,GAKrC,SAASE,EAAqBxE,GAC7B,IAIIsE,EADAC,EAAS,EAERvE,EAIJsE,EAAW,IAAI/E,IAAyB,CAAE+B,IAAKtB,EAASuB,WAAW,EAAOC,KAAMjC,OAHhFgF,EAAS,IACTD,EAAW,IAAI/E,IAAyB,CAAE2C,MAAOrD,EAAwB0C,WAAW,EAAOC,KAAMjC,OAKlG,IAAID,EAAO,IAAIC,IAcf,OAbAD,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAUgF,GAAQ,IArgBlC,IAsgBtBjF,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAUgF,EAAQ,IAtgBlC,IAugBtBjF,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAUgF,GAAQ,GAAY,IACpEjF,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAUgF,EAAQ,GAAY,IAEpEjF,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAChGD,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAEhGD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IACvCD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAExB,IAAIA,IAAWD,EAAMgF,GAKrC,SAASG,EAAmBzE,GAC3B,IAIIsE,EADAC,EAAS,EAERvE,EAIJsE,EAAW,IAAI/E,IAAyB,CAAE+B,IAAKtB,EAASuB,WAAW,EAAOC,KAAMjC,OAHhFgF,EAAS,IACTD,EAAW,IAAI/E,IAAyB,CAAE2C,MAAOrD,EAAwB0C,WAAW,EAAOC,KAAMjC,OAKlG,IAAID,EAAO,IAAIC,IAcf,OAbAD,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAW,GAAWgF,GAniBtC,IAoiBtBjF,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAW,GAAWgF,EAAQ,IACpEjF,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAW,GAAWgF,GAriBtC,IAsiBtBjF,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAW,GAAWgF,EAAQ,IAEpEjF,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAChGD,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAEhGD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IACvCD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAExB,IAAIA,IAAWD,EAAMgF,GAKrC,SAASI,EAAsB1E,GAC9B,IAIIsE,EADAC,EAAS,EAERvE,EAIJsE,EAAW,IAAI/E,IAAyB,CAAE+B,IAAKtB,EAASuB,WAAW,EAAOC,KAAMjC,OAHhFgF,EAAS,IACTD,EAAW,IAAI/E,IAAyB,CAAE2C,MAAOrD,EAAwB0C,WAAW,EAAOC,KAAMjC,OAKlG,IAAID,EAAO,IAAIC,IAcf,OAbAD,EAAKE,SAASC,KAAK,IAAIF,KAAe,KAAW,GAAWgF,GAjkBtC,IAkkBtBjF,EAAKE,SAASC,KAAK,IAAIF,KAAe,KAAW,GAAWgF,EAAQ,IACpEjF,EAAKE,SAASC,KAAK,IAAIF,IAAe,KAAW,GAAWgF,GAnkBtC,IAokBtBjF,EAAKE,SAASC,KAAK,IAAIF,IAAe,KAAW,GAAWgF,EAAQ,IAEpEjF,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAChGD,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAEhGD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IACvCD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAExB,IAAIA,IAAWD,EAAMgF,GCtiBrC,IAzCA,IACMK,EAAW,IACXC,EAAWD,IAsCXE,EAAgB,IAAItF,IACjBF,EAAI,EAAGA,EAzCI,IAyCaA,IAAK,CACrC,IAAM2B,EAAIoC,KAAKC,MAAMD,KAAK0B,SAAWH,EAAWC,GAC1C3D,EAAImC,KAAKC,MAAMD,KAAK0B,SAAWH,EAAWC,GAC1CG,EAAI3B,KAAKC,MAAMD,KAAK0B,SAAWH,EAAWC,GAC1CI,EAAW,IAAIzF,IAAcyB,EAAGC,EAAG8D,GACzCF,EAAcrF,SAASC,KAAKuF,GAkB7B,IAbA,IAAMC,EAAgB,IAAI1F,IAAqB,CAC9C2F,KAAM,EACNhD,MAAO,SACPiD,cAAc,EACd7D,IAvCkB,WACf,IAAM8D,EAASC,SAASC,cAAc,UAChCC,EAAMH,EAAOI,WAAW,MAG9BJ,EAAOK,MAlBS,EAmBhBL,EAAOM,OAnBS,GAEQ,SAACH,EAAKI,EAAcC,EAASC,GACrDN,EAAIO,OACJ,IAAMC,EAAWR,EAAIS,qBAAqBL,EAAaA,EAAa,EAAEA,EAAaA,EAAaA,GAChGI,EAASE,aAAa,EAAG,yBACzBF,EAASE,aAAa,GAAK,yBAC3BF,EAASE,aAAa,EAAG,uBACzBV,EAAIW,UAAYH,EAChBR,EAAIY,SAAS,EAAE,EAAEP,EAAQC,GACzBN,EAAIa,UAcJC,CAAoBd,EAJCe,EAIkBlB,EAAOK,MAAOL,EAAOM,QAM5D,IAAM1F,EAAU,IAAIT,IAAc6F,GAIlC,OAFApF,EAAQuG,KAAOhH,IACfS,EAAQwG,aAAc,EACfxG,EAkBLyG,GAELC,aAAa,EAEbC,KAAK,EACLC,YAAY,IAGPC,EAAa,GACVxH,EAAI,EAAGA,EAhEI,IAgEaA,IAAK,CACrC,IAAM2B,EAAwC,GAApCoC,KAAKC,MAAsB,EAAhBD,KAAK0B,SAAe,GACnC7D,GAA2C,IAAvCmC,KAAKC,MAAsB,GAAhBD,KAAK0B,SAAgB,GACpCC,EAAwC,GAApC3B,KAAKC,MAAsB,EAAhBD,KAAK0B,SAAe,GACnCE,EAAW,IAAIzF,IAAcyB,EAAGC,EAAG8D,GACzC8B,EAAWpH,KAAKuF,GAGjB,IAAI8B,EAAsB,IAAIvH,IAAasF,EAAeI,GAC1D6B,EAAoBvE,SAASsE,WAAaA,ECvE1CzD,KAAK2D,QAAU,SAASC,GACvB,OAAOA,EAAS5D,KAAK0B,UAGtB1B,KAAK6D,cAAgB,SAASC,EAAMC,GACnC,OAAOD,EAAQ9D,KAAK0B,UAAYqC,EAAKD,IAGtC9D,KAAKgE,iBAAmB,SAASC,GAGhC,OAAOA,GAAOjE,KAAK0B,SAAW1B,KAAK0B,WAoIrBwC,MAnHf,SAA2BC,EAAS7F,EAAU8F,GAE7C,IAAIC,EAAW,CACdC,OAAQ,IACRxC,KAAM,IACNyC,OAAQ,IACRC,UAAW,GACXC,WAAY,GACZC,cAAe,EACfC,aAAc,IACdC,OAAQ,CAAC,SAAU,SAAU,UAEjBT,EAAVA,EAtBgB,SAASU,EAAQC,GACpC,IAAIC,EAAMC,KAAKC,MAAMD,KAAKE,UAAUJ,IACpC,IAAI,IAAIK,KAAON,EAAO,CACrB,IAAIZ,EAAMY,EAAOM,GACjBJ,EAAII,GAAOlB,EAEZ,OAAOc,EAgBgBK,CAAYjB,EAASE,GAC5BA,EAGhB,IA9B0BgB,EA8BtBC,EAAO,IAAInJ,IACfmJ,EAAKC,KAAOvF,KAAK6D,cAAc,IAAK,KAIpCyB,EAAKhH,SAASC,IAAID,EAASV,EAAGU,EAAST,EAAGS,EAASqD,GACnD2D,EAAKlB,SAAS7F,IAAI6F,EAASxG,EAAGwG,EAASvG,EAAGuG,EAASzC,GAGnD,IAAI,IAAI1F,EAAE,EAAGA,EAAEkI,EAAQG,OAAQrI,IAAI,CAClC,IAAIkD,EAAW,IAAIhD,IAA0BgI,EAAQrC,KAAMqC,EAAQrC,MAC/DZ,EAAW,IAAI/E,IAAyB,CAAC2C,OAzCpBuG,EAyCqClB,EAAQS,OAxChES,EAAMrF,KAAKC,MAAOD,KAAK0B,SAAW2D,EAAM3H,UAwCiC4F,aAAa,EAAMlF,KAAMjC,MACpGyF,EAAW,IAAIzF,IAAYgD,EAAU+B,GACzCoE,EAAK1E,IAAKgB,GAEVA,EAAS2D,KAAO,EAEhB3D,EAAStD,SAASC,IAAI,EAAE,EAAE,GAE1BqD,EAAS4D,YAAc,GACvB5D,EAAS4D,YAAY5H,GAAMoC,KAAK0B,SAAW,KAAuB,EAAfyC,EAAQI,QAAYvE,KAAK0B,SAC5EE,EAAS4D,YAAY3H,GAAMmC,KAAK0B,SAAW,KAAuB,EAAfyC,EAAQI,QAAYvE,KAAK0B,SAC5EE,EAAS4D,YAAY7D,GAAM3B,KAAK0B,SAAW,KAAuB,EAAfyC,EAAQI,QAAYvE,KAAK0B,SAE5EE,EAASwC,SAASxG,EAAIoC,KAAK2D,QAAQ,KACnC/B,EAASwC,SAASvG,EAAImC,KAAK2D,QAAQ,KACnC/B,EAASwC,SAASzC,EAAI3B,KAAK2D,QAAQ,KAEnC,IAAI7B,EAAO9B,KAAK6D,cAAc,EAAG,GACjCjC,EAAS6D,MAAM7H,EAAIkE,EACnBF,EAAS6D,MAAM5H,EAAIiE,EAEnBF,EAAS8D,aAAe1F,KAAKgE,iBAAiB,IAC9CpC,EAAS+D,aAAe3F,KAAKgE,iBAAiB,IAC9CpC,EAASgE,aAAe5F,KAAKgE,iBAAiB,IA2D/C,OAxDAsB,EAAKO,QAAU,WACd,GAAIP,EAAM,CACTA,EAAKhH,SAASC,IAAI,EAAE,EAAE,GACtB,IAAI,IAAItC,EAAE,EAAGA,EAAIqJ,EAAKQ,SAASpI,OAAQzB,IAAI,CAC1C,IAAI2F,EAAW0D,EAAKQ,SAAS7J,GAC7B2F,EAASV,SAAS2E,UAClBjE,EAASzC,SAAS0G,UAClBP,EAAKS,OAAQnE,GACbA,EAAW,KAGZ0D,EAAKU,OAAOD,OAAQT,GACpBA,EAAO,OAITA,EAAKW,OAAS,WAEb,GAAIX,EAAM,CACT,IAAI,IAAIY,EAAE,EAAGA,EAAIZ,EAAKQ,SAASpI,OAAQwI,IAAI,CAC1C,IAAItE,EAAW0D,EAAKQ,SAASI,GAE7BtE,EAAS4D,YAAY3H,GAAKmC,KAAK6D,cAAc,EAAE,GAC/CjC,EAAS2D,MAAQvF,KAAK6D,cAAc,KAAO,KAE3C,IAAIsC,EAAShC,EAAQQ,cAAgB/C,EAAS4D,YAAY5H,EAAIgE,EAAStD,SAASV,GAAK,GACjFwI,EAAS,GAAIjC,EAAQQ,cAAgB/C,EAAS4D,YAAY3H,EAAI+D,EAAStD,SAAST,GAAK,GACrFwI,EAASlC,EAAQQ,cAAgB/C,EAAS4D,YAAY7D,EAAIC,EAAStD,SAASqD,GAAK,GAErFC,EAAStD,SAASV,GAAKuI,EACvBvE,EAAStD,SAAST,GAAKuI,EACvBxE,EAAStD,SAASqD,GAAK0E,EAEvBzE,EAASwC,SAASvG,GAAK+D,EAAS+D,aAChC/D,EAASwC,SAASxG,GAAKgE,EAAS8D,aAChC9D,EAASwC,SAASzC,GAAKC,EAASgE,aAI7BhE,EAAStD,SAAST,GAAKsG,EAAQO,gBACjC9C,EAASV,SAAS2E,UAClBjE,EAASzC,SAAS0G,UAClBP,EAAKS,OAAOnE,GACZA,EAAW,MAIV0D,EAAKQ,SAASpI,QAAU,IAC1B4H,EAAKO,YAQDP,GC7IO,MAA0B,8CCA1B,MAA0B,mDCA1B,MAA0B,2CCA1B,MAA0B,iCCA1B,OAA0B,kCCA1B,OAA0B,kCCA1B,OAA0B,qCCgsB1BgB,G,kDAtqBd,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,MAAQ,CAAEC,KAAM,EAAKF,MAAME,KAC7BR,QAAQ,GAJM,E,gEAOE,IAAD,OAGnBS,KAAKC,eAAgB,IAAIxK,KAAsByK,KAAKC,GACpDH,KAAKI,cAAe,IAAI3K,KAAsByK,KAAKG,GACnDL,KAAKM,mBAAoB,IAAI7K,KAAsByK,KCtCtC,88LDuCbF,KAAKO,oBAAqB,IAAI9K,KAAsByK,KEvCvC,88LFwCbF,KAAKQ,kBAAmB,IAAI/K,KAAsByK,KGxCrC,knDHyCbF,KAAKS,qBAAsB,IAAIhL,KAAsByK,KIzCxC,knDJ0CbF,KAAKU,cAAe,IAAIjL,KAAsByK,KAAKS,GAGnDX,KAAKY,eAAiB,GAEtBZ,KAAKa,WAAa,GAClB,IAAK,IAAIrB,EAAI,EAAGA,EAAI,GAAIA,IACvBQ,KAAKa,WAAWlL,KACf,CACCmL,MAAM,EACNC,UAAU,EACVC,WAAY,EAAC,GAAM,GAAM,GAAM,GAAM,GACrCC,YAAa,IAKhB,IAAMC,EAAY,SAACC,GAClB,IAAIC,EAAQ7F,SAASC,cAAc,SAMnC,OALA4F,EAAMD,IAAMA,EACZC,EAAM5H,aAAa,UAAW,QAE9B4H,EAAMC,MAAMC,QAAU,OACtB/F,SAASgG,KAAKC,YAAYJ,GACnBA,GAgBRpB,KAAKyB,gBAAkBP,EAAUQ,GACjC1B,KAAK2B,gBAAkBT,EAAUU,IACjC5B,KAAK6B,gBAAkBX,EAAUY,IACjC9B,KAAK+B,gBAAkBb,EAAUc,IACjChC,KAAKiC,gBAAkBf,EAAUgB,GAEjClC,KAAKmC,WAAajB,EAAUkB,IAK5B,IAAM9G,EAAS0E,KAAK1E,OAEd+G,EAAW,IAAI5M,IAAoB,CAAC6F,SAAQgH,OAAO,IACzDD,EAASE,gBAAiB,EAC1BF,EAASG,QAASC,OAAOC,WAAYD,OAAOE,aAC5CpH,SAASgG,KAAKC,YAAaa,EAASO,YAGpC,IAAMC,EAAQ,IAAIpN,IACZqN,EAAS,IAAIrN,IAAyB,GAAIgN,OAAOC,WAAaD,OAAOE,YAAa,GAAK,KACvFI,EAAW,IAAIC,IAAeF,EAAQT,EAASO,YACrDG,EAASE,YAAc,EACvBF,EAASG,YAAc,GACvBH,EAASI,KAAO,CACbC,KAAM,GACNC,GAAI,GACJC,MAAO,GACPC,OAAQ,IAEXR,EAASS,cAAgBlK,KAAKmK,GAAG,EACjCV,EAASW,cAAgB,EAAEpK,KAAKmK,GAAG,EAEnCV,EAASY,iBAAoBrK,KAAKmK,GAAG,EACrCV,EAASa,gBAAkBtK,KAAKmK,GAAG,EAEnC,IAAII,EAAS,IAAIpO,KAAiB,GAAK,GAAI,GACvCqO,EAAS,IAAIrO,IAAe,EAAG,GAAI,GAEvCsN,EAASgB,iBAAiB,UAAU,WACnC,IAAIC,GAAI,IAAIvO,KAAgBwO,KAAKlB,EAASmB,QAC1CnB,EAASmB,OAAOC,MAAMN,EAAQC,GAC9BE,EAAEI,IAAIrB,EAASmB,QACfpB,EAAOlL,SAASwM,IAAIJ,MAMrB,IAAMK,EVuOR,SAAgCnO,GAC/B,IAGIV,EAAO,IAAIC,IAEfD,EAAKE,SAASC,KAAK,IAAIF,KAAe,KAAW,GAAY,IAC7DD,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAW,GAAY,IAC7DD,EAAKE,SAASC,KAAK,IAAIF,IAAe,KAAW,GAAY,IAC7DD,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAW,GAAY,IAG7D,IAEIF,EACA+O,EAHAC,EAAoB,GACpB1O,EAAK,EAGT,IAAKN,EAAI,EAAGA,EAAI,EAAGA,IAClB,IAAK+O,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAEvB,IAAI1N,EAAUvB,GAAaiP,EAAE,GAE7B9O,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAoBE,GAAe,EAAEjP,EAAIqB,EAAS,IACvFpB,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAoBE,GAAe,EAAEjP,EAAI,EAAIqB,EAAS,IAC3FpB,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAqB,EAAGE,GAAe,EAAEjP,EAAIqB,EAAS,IAC3FpB,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAqB,EAAGE,GAAe,EAAEjP,EAAI,EAAIqB,EAAS,IAE/F2N,EAAkB5O,KAAK,CAACE,EAAIA,EAAG,EAAGA,EAAG,EAAGA,EAAG,IAG3CA,GAAM,EAMRN,EAAI,EAEJqB,EAAUvB,IADViP,EAAI,GACqB,GAEzB9O,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAoBE,GAAe,EAAEjP,EAAIqB,EAAS,IACvFpB,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAoBE,GAAe,EAAEjP,EAAI,EAAIqB,EAAS,IAC3FpB,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAqB,EAAGE,GAAe,EAAEjP,EAAIqB,EAAS,IAC3FpB,EAAKE,SAASC,KAAK,IAAIF,IAA6B,EAAE6O,EAAjB,IAAqB,EAAGE,GAAe,EAAEjP,EAAI,EAAIqB,EAAS,IAE/F2N,EAAkB5O,KAAK,CAACE,EAAIA,EAAG,EAAGA,EAAG,EAAGA,EAAG,IAG3CA,GAAM,EAGN,IAAI4O,EAAYjP,EAAKE,SACjBgP,EAAkB,GACtB,IAAKnP,EAAI,EAAGA,EAAIkP,EAAUzN,OAAQzB,IAAK,CACtC,IAAIyO,EAAIS,EAAUlP,GAClBmP,EAAgB/O,KAAK,CAACqO,EAAE9M,EAAG8M,EAAE7M,IAI9B,IAAIwN,EAAYC,IAAWxH,KAAKsH,GAAiBC,UACjD,IAAKpP,EAAI,EAAGA,EAAIoP,EAAU3N,OAAQzB,GAAG,EAAG,CACvC,IAAIsP,EAAW,CAACF,EAAUpP,GAAIoP,EAAUpP,EAAE,GAAIoP,EAAUpP,EAAE,IACtDuP,GAAW,EACf,IAAKR,EAAI,EAAGA,EAAIC,EAAkBvN,OAAQsN,IAAK,CAC9C,IAAIS,EAAcR,EAAkBD,GAChCS,EAAYC,SAASH,EAAS,KAAOE,EAAYC,SAASH,EAAS,KAAOE,EAAYC,SAASH,EAAS,MAC3GC,GAAW,GAGTA,GACHtP,EAAKI,MAAMD,KAAK,IAAIF,IAAaoP,EAAS,GAAIA,EAAS,GAAIA,EAAS,KAWtE,IAPA,IAEItO,EACAC,EACAC,EACAC,EACAC,EACMI,EAAU,EAAGA,EAAUvB,EAAKI,MAAMoB,OAAQD,IAEnDR,EAAW,GAEXG,GAHAC,EAAOnB,EAAKI,MAAMmB,IAGDE,EACjBT,GAAQ3B,KAAoBW,EAAKE,SAASgB,GAAWQ,EAZ9B,IAYwDrC,EAC/E4B,GAAS3B,IAAqBU,EAAKE,SAASgB,GAAWS,EAZhC,IAY0DrC,EACjFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IACtCC,EAAYC,EAAKS,EACjBZ,GAAQ3B,KAAoBW,EAAKE,SAASgB,GAAWQ,EAhB9B,IAgBwDrC,EAC/E4B,GAAS3B,IAAqBU,EAAKE,SAASgB,GAAWS,EAhBhC,IAgB0DrC,EACjFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IACtCC,EAAYC,EAAKU,EACjBb,GAAQ3B,KAAoBW,EAAKE,SAASgB,GAAWQ,EApB9B,IAoBwDrC,EAC/E4B,GAAS3B,IAAqBU,EAAKE,SAASgB,GAAWS,EApBhC,IAoB0DrC,EACjFyB,EAASZ,KAAK,IAAIF,IAAce,EAAMC,IAGtCjB,EAAK8B,cAAc,GAAG3B,KAAKY,GAE5Bf,EAAK8B,cAAc,GAAK9B,EAAK8B,cAAc,GAE3C,IAAMkD,EAAW,IAAI/E,IAAyB,CAAE+B,IAAKtB,EAASuB,WAAW,EAAOC,KAAMjC,MAItF,OAFa,IAAIA,IAAYD,EAAMgF,GU/UfyK,CAAuBjF,KAAKC,eAC/C4C,EAAM3I,IAAKmK,GAEX,IAAMa,EAAgB3K,EAAoByF,KAAKM,mBACzC6E,EAAsB5K,GAAoB,GAChDsI,EAAM3I,IAAKgL,GACXrC,EAAM3I,IAAKiL,GAEX,IAAMC,EAAiB1K,EAAqBsF,KAAKO,oBAC3C8E,EAAuB3K,GAAqB,GAClDmI,EAAM3I,IAAKkL,GACXvC,EAAM3I,IAAKmL,GAEX,IAAMC,EAAe3K,EAAmBqF,KAAKQ,kBACvC+E,EAAqB5K,GAAmB,GAC9CkI,EAAM3I,IAAKoL,GACXzC,EAAM3I,IAAKqL,GAEX,IAAMC,EAAkB5K,EAAsBoF,KAAKS,qBAC7CgF,EAAwB7K,GAAsB,GACpDiI,EAAM3I,IAAKsL,GACX3C,EAAM3I,IAAKuL,GAEX,IAAMC,EV4bR,SAAyBxP,GACxB,IAEIV,EAAO,IAAIC,IACfD,EAAKE,SAASC,KAAK,IAAIF,KAAe,KAAW,GAAY,IAC7DD,EAAKE,SAASC,KAAK,IAAIF,KAAe,IAAW,GAAY,IAC7DD,EAAKE,SAASC,KAAK,IAAIF,IAAe,KAAW,GAAY,IAC7DD,EAAKE,SAASC,KAAK,IAAIF,IAAe,IAAW,GAAY,IAE7DD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IACvCD,EAAKI,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAEvCD,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAChGD,EAAK8B,cAAc,GAAG3B,KAAK,CAAC,IAAIF,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,GAAI,IAAIA,IAAc,EAAE,KAEhG,IAAM+E,EAAW,IAAI/E,IAAyB,CAAC+B,IAAKtB,EAASkC,MAAOrD,EAAwB0C,WAAW,EAAOC,KAAMjC,MAEhHkQ,EAAW,IAAIlQ,IAAWD,EAAMgF,GAIpC,OAFAmL,EAAS/N,SAASC,IAAI,EAAE,GApmBF,GAsmBf8N,EUjdYC,CAAgB5F,KAAKU,cACvCmC,EAAM3I,IAAKwL,GAEX1F,KAAK6F,WAAa,GAClB7F,KAAK8F,qBAAuB,GAC5B9F,KAAK+F,eAAiB,GACtB/F,KAAKgG,cAAgB,GACrBhG,KAAKiG,cAAgB,GAErB,IAAK,IAAI1Q,EAAI,EAAGA,EAAI,EAAGA,IACtB,IAAK,IAAI+O,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC3B,IAAI4B,KAAO5N,EAAW/C,EAAG+O,EAAGtE,KAAKC,cAAeD,KAAKI,eAEhD,GAAG+F,QAAU,EAAE5Q,EAAI+O,EACxB4B,EAAK,GAAGC,QAAU,EAAE5Q,EAAI+O,EACxBzB,EAAM3I,IAAKgM,EAAK,IAChBlG,KAAK+F,eAAepQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC/DgJ,KAAK6F,WAAWlQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC3DgJ,KAAK8F,qBAAqBnQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IACrE,IAAMoP,EAAS,IAAI3Q,IAAsByQ,EAAK,IAC9CrD,EAAM3I,IAAKkM,GAEXvD,EAAM3I,IAAKgM,EAAK,IAChBlG,KAAKgG,cAAcrQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC9DgJ,KAAK6F,WAAWlQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC3DgJ,KAAK8F,qBAAqBnQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAErEgJ,KAAKiG,cAActQ,KAAMuQ,EAAK,KAE1BG,EAAetQ,EAAkBR,EAAG+O,EAAGtE,KAAKC,gBACnC,GAAGkG,QAAU,EAAE5Q,EAAI+O,EAChCzB,EAAM3I,IAAKmM,EAAa,IACxBrG,KAAK8F,qBAAqBnQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAErE6L,EAAM3I,IAAKmM,EAAa,KAMtBH,EAAO5N,EAFX/C,EAAI,EACJ+O,EAAI,EACwBtE,KAAKC,cAAeD,KAAKI,eAChD,GAAG+F,QAAU,GAClBD,EAAK,GAAGC,QAAU,GAClBtD,EAAM3I,IAAKgM,EAAK,IAChBlG,KAAK+F,eAAepQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC/DgJ,KAAK6F,WAAWlQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC3DgJ,KAAK8F,qBAAqBnQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IACrE,IAUIqP,EAVED,EAAS,IAAI3Q,IAAsByQ,EAAK,IAC9CrD,EAAM3I,IAAKkM,GAEXvD,EAAM3I,IAAKgM,EAAK,IAChBlG,KAAKgG,cAAcrQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC9DgJ,KAAK6F,WAAWlQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAC3DgJ,KAAK8F,qBAAqBnQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAErEgJ,KAAKiG,cAActQ,KAAMuQ,EAAK,KAE1BG,EAAetQ,EAAkBR,EAAG+O,EAAGtE,KAAKC,gBACnC,GAAGkG,QAAU,GAC1BtD,EAAM3I,IAAKmM,EAAa,IACxBrG,KAAK8F,qBAAqBnQ,KAAMkN,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,IAErE6L,EAAM3I,IAAKmM,EAAa,IAGxB,IAAIC,EAAe,IAAI7Q,IACvB6Q,EAAa5Q,SAASC,KAAK,IAAIF,KAAe,KAAM,IAAK,IACzD6Q,EAAa5Q,SAASC,KAAK,IAAIF,IAAc,KAAM,IAAK,IACxD6Q,EAAa5Q,SAASC,KAAK,IAAIF,IAAc,IAAK,IAAK,IACvD6Q,EAAa5Q,SAASC,KAAK,IAAIF,KAAe,IAAK,IAAK,IAExD6Q,EAAa1Q,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAC/C6Q,EAAa1Q,MAAMD,KAAK,IAAIF,IAAa,EAAG,EAAG,IAE/C,IAAM8Q,EAAc,IAAI9Q,IAAyB,CAAE2C,MAAO,SAAUoO,SAAS,EAAO/O,WAAW,EAAMC,KAAMjC,MAErGgR,EAAe,IAAIhR,IAAY6Q,EAAcC,GACnD1D,EAAM3I,IAAKuM,GACXzG,KAAK0G,cAAgB7D,EAAMzD,SAASyD,EAAMzD,SAASpI,OAAO,GAkB1D8L,EAAOlL,SAASqD,EAAI,GACpB8H,EAASxD,SAGTsD,EAAM3I,IAAI8C,GAWVyF,OAAOsB,iBAAiB,UARP,WAChB,IAAMpI,EAAQ8G,OAAOC,WACf9G,EAAS6G,OAAOE,YACtBN,EAASsE,cAAclE,OAAOmE,kBAC9BvE,EAASG,QAAQ7G,EAAOC,GACxBkH,EAAO+D,OAASlL,EAAQC,EACxBkH,EAAOgE,4BAKR,IAAMC,EAAY,IAAItR,IAEhBuR,EAAyB,SAACC,GAE/B,KAAInE,EAAOlL,SAASqD,EAAI,KAAxB,CAEA,IAaIiM,EAbAC,EAAQ,IAAI1R,IAsBhB,GArBmB,cAAfwR,EAAMxK,MAET0K,EAAMjQ,EAAM+P,EAAMG,QAAU3E,OAAOC,WAAe,EAAI,EACtDyE,EAAMhQ,GAAQ8P,EAAMI,QAAU5E,OAAOE,YAAgB,EAAI,GAChC,eAAfsE,EAAMxK,OAChB0K,EAAMjQ,EAAM+P,EAAMK,QAAQ,GAAGF,QAAU3E,OAAOC,WAAe,EAAI,EACjEyE,EAAMhQ,GAAQ8P,EAAMK,QAAQ,GAAGD,QAAW5E,OAAOE,YAAgB,EAAI,GAOtE,EAAK4E,YAAc,KACnB,EAAKC,qBAAuB,KAC5B,EAAKC,+BAAiC,KACtC,EAAKC,eAAgB,EAErBX,EAAUY,cAAeR,EAAOrE,GAG5B,EAAKiD,eAAgB,CACxBmB,EAAaH,EAAUa,iBAAkB,EAAK/B,YAAY,GAE1D,IAAK,IAAItQ,EAAI,EAAGA,EAAI2R,EAAWlQ,OAAQzB,IAAK,CAI1C,IAAI4Q,EAAUe,EAAW3R,GAAG4I,OAAOgI,QACnC,IAAK,EAAKuB,cAAe,CAGxB,IAAIG,EAAyB,EAAKhH,WAAWsF,GAASlF,YACtD,GAAI,EAAKyF,cAAe,CACvB,IAAIoB,EAAiBf,EAAUa,iBAAkB,CAAC,EAAKlB,gBACnDoB,EAAe9Q,OAAS,IAE3B+L,EAASgF,cAAe,EAMxB,EAAKR,YAAcpB,EACnB,EAAKqB,qBAAuBM,EAAe,GAAGE,MAAM9Q,EACpD,EAAKuQ,+BAAiCI,EAGnB,cAAfZ,EAAMxK,MACT,EAAKnB,OAAOyI,iBAAkB,YAAakE,GAAU,GACrD,EAAK3M,OAAOyI,iBAAkB,UAAWmE,GAAa,IAC7B,eAAfjB,EAAMxK,OAChB,EAAKnB,OAAOyI,iBAAkB,YAAakE,GAAU,GACrD,EAAK3M,OAAOyI,iBAAkB,WAAYmE,GAAa,KAI1D,WAiBCA,EAAc,SAAdA,EAAejB,GAEpB,IAGK/C,EACAiE,EAJDjC,EAAO,EAAKqB,YAE0B,IAAtC,EAAK1G,WAAWqF,GAAMjF,aAA2D,IAAtC,EAAKJ,WAAWqF,GAAMjF,cAGhE,EAAKJ,WAAWqF,GAAMjF,YAAc,IACvCiD,EAAS,EACTiE,EAAyD,IAAlD7O,KAAK8O,IAAI,EAAKvH,WAAWqF,GAAMjF,YAAc,KAEpDiD,EAAS,EACTiE,EAAyD,IAAlD7O,KAAK8O,IAAI,EAAKvH,WAAWqF,GAAMjF,YAAc,IAMrD,EAAKyG,eAAgB,EAErB,IAAIW,QAAa,EAAKxH,WAAWqF,IAC/B7I,GAAG,CAAC4D,YAAaiD,GAASiE,GAC1BG,OAAOD,SAAaE,WAAWC,KAC/BC,UAAS,WACTC,GAAgBxC,EAAM,EAAKrF,WAAWqF,GAAMjF,gBAE5C0H,YAAW,WACX,EAAKjB,eAAe,KAEpBkB,SAQH,EAAKtN,OAAOuN,oBAAqB,YAAaZ,GAAU,GACxD,EAAK3M,OAAOuN,oBAAqB,YAAaZ,GAAU,GACxD,EAAK3M,OAAOuN,oBAAqB,UAAWX,GAAa,GACzD,EAAK5M,OAAOuN,oBAAqB,WAAYX,GAAa,IAGrDD,EAAW,SAAChB,GAEjB,IAAIf,EAAO,EAAKqB,YACZuB,EAAY,EAAKtB,qBACjBuB,EAAe,EAAKtB,+BAUpBN,EAAQ,IAAI1R,IAShB,GARmB,cAAfwR,EAAMxK,MACT0K,EAAMjQ,EAAM+P,EAAMG,QAAU3E,OAAOC,WAAe,EAAI,EACtDyE,EAAMhQ,GAAQ8P,EAAMI,QAAU5E,OAAOE,YAAgB,EAAI,GAChC,cAAfsE,EAAMxK,OAChB0K,EAAMjQ,EAAM+P,EAAMK,QAAQ,GAAGF,QAAU3E,OAAOC,WAAe,EAAI,EACjEyE,EAAMhQ,GAAQ8P,EAAMK,QAAQ,GAAGD,QAAW5E,OAAOE,YAAgB,EAAI,GAEtEoE,EAAUY,cAAeR,EAAOrE,GAC5B,EAAK4D,cAAe,CACvB,IAAIoB,EAAiBf,EAAUa,iBAAkB,CAAC,EAAKlB,gBACvD,GAAIoB,EAAe9Q,OAAS,EAAG,CAC9B,IACIiK,EAAc8H,GAAgBD,EADtBhB,EAAe,GAAGE,MAAM9Q,GAlBd,KAsBtB+J,EAAc3H,KAAK0P,IApBC,IAoBkB/H,GACtCA,EAAc3H,KAAK2P,IAnBC,EAmBkBhI,GAEtCyH,GAAgBxC,EAAMjF,GAYtB,EAAKJ,WAAWqF,GAAMjF,YAAcA,KAMjCiI,GAAsB,WAAgC,IAA/BhD,EAA8B,uDAAvB,EAAGlM,EAAoB,uDAAf,EAAGmP,EAAY,uDAAN,EAChD,EAAKpD,gBAAkB,EAAKC,gBAC/B,EAAKD,eAAeG,GAAMpM,SAASC,MAAMC,GAAM0D,SAASvG,GAAKgS,IAOzDT,GAAkB,SAACxC,EAAMjF,GA8C9B,GAdAiI,GAAoBhD,EAAM,EAAGkD,GAAenI,EA9B5B,CACfoI,KAAM,CAAC,EAAG,GAAK,EAAG,KAClBC,QAAS,CAAC,EAAG,EAAG,EAAG,MA6BpBJ,GAAoBhD,EAAM,EAAGkD,GAAenI,EA1B5B,CACfoI,KAAM,CAAC,EAAG,IAAM,GAAK,EAAG,KACxBC,QAAS,CAAC,EAAG,EAAG,IAAK,GAAK,MAyB3BJ,GAAoBhD,EAAM,EAAGkD,GAAenI,EAtB5B,CACfoI,KAAM,CAAC,EAAG,GAAK,IAAM,GAAK,EAAG,KAC7BC,QAAS,CAAC,EAAG,EAAG,IAAK,GAAK,GAAK,MAqBhCJ,GAAoBhD,EAAM,EAAGkD,GAAenI,EAlB5B,CACfoI,KAAM,CAAC,EAAG,GAAK,GAAK,IAAM,EAAG,KAC7BC,QAAS,CAAC,EAAG,EAAG,IAAK,GAAK,GAAK,MAiBhCJ,GAAoBhD,EAAM,EAAGkD,GAAenI,EAd5B,CACfoI,KAAM,CAAC,EAAG,IAAM,GAAK,GAAK,EAAG,KAC7BC,QAAS,CAAC,EAAG,EAAG,IAAK,GAAK,GAAK,MAahCJ,GAAoBhD,EAAM,EAAGkD,GAAenI,EAV5B,CACfoI,KAAM,CAAC,EAAG,IAAM,GAAK,GAAK,EAAG,KAC7BC,QAAS,CAAC,EAAG,EAAG,EAAG,IAAK,EAAG,MAWxBrI,EAAc,KAAQ,EAAKJ,WAAWqF,GAAMlF,WAAW,KAAK,EAAKS,gBAAgB8H,QAAS,EAAK9H,gBAAgB+H,YAAY,EAAG,EAAK/H,gBAAgB1B,OAAQ,EAAKc,WAAWqF,GAAMlF,WAAW,IAAK,GACjMC,EAAc,IAAO,EAAKJ,WAAWqF,GAAMlF,WAAW,KAAK,EAAKW,gBAAgB4H,QAAS,EAAK5H,gBAAgB6H,YAAY,EAAG,EAAK7H,gBAAgB5B,OAAQ,EAAKc,WAAWqF,GAAMlF,WAAW,IAAK,GAChMC,EAAc,IAAO,EAAKJ,WAAWqF,GAAMlF,WAAW,KAAK,EAAKa,gBAAgB0H,QAAS,EAAK1H,gBAAgB2H,YAAY,EAAG,EAAK3H,gBAAgB9B,OAAQ,EAAKc,WAAWqF,GAAMlF,WAAW,IAAK,GAChMC,EAAc,KAAQ,EAAKJ,WAAWqF,GAAMlF,WAAW,KAAK,EAAKe,gBAAgBwH,QAAS,EAAKxH,gBAAgByH,YAAY,EAAG,EAAKzH,gBAAgBhC,OAAQ,EAAKc,WAAWqF,GAAMlF,WAAW,IAAK,GACjMC,EAAc,IAAO,EAAKJ,WAAWqF,GAAMlF,WAAW,KAAK,EAAKiB,gBAAgBsH,QAAS,EAAKtH,gBAAgBuH,YAAY,EAAG,EAAKvH,gBAAgBlC,OAAQ,EAAKc,WAAWqF,GAAMlF,WAAW,IAAK,GAEhMC,GAAe,MAAS,EAAKJ,WAAWqF,GAAMpF,KAAM,CACvD,EAAKqB,WAAWoH,QAAS,EAAKpH,WAAWqH,YAAY,EAAG,EAAKrH,WAAWpC,OAAQ,EAAKc,WAAWqF,GAAMpF,MAAO,EAE7G,IAAI2I,EAAa,IAAIjM,EACpB,GACA,IAAI/H,IAAc,EAAKwQ,cAAcC,GAAM,GAAG,EAAG,EAAKD,cAAcC,GAAM,GAAG,GAAK,IAClF,IAAIzQ,IAAc,EAAG,EAAG,KAEzBoN,EAAM3I,IAAIuP,GACV,EAAK7I,eAAejL,KAAK8T,GAEzB,IAAIC,EAAa,IAAIlM,EACpB,GACA,IAAI/H,IAAc,EAAKwQ,cAAcC,GAAM,GAAG,EAAG,EAAKD,cAAcC,GAAM,GAAG,GAAK,IAClF,IAAIzQ,IAAc,EAAG,GAAI,KAE1BoN,EAAM3I,IAAIwP,GACV,EAAK9I,eAAejL,KAAK+T,KAKrBN,GAAiB,SAACnI,EAAa0I,GACnC,GAAoB,IAAhB1I,EAAoB,OAAO0I,EAAUL,QAAQ,GAEjD,IAAIM,EAAaD,EAAUN,KAAKQ,WAAU,SAAA3S,GAAC,OAAIA,GAAK+J,KAChD6I,EAAaF,EAAa,EAE1BG,GAAY9I,EAAc0I,EAAUN,KAAKS,KAAgBH,EAAUN,KAAKO,GAAcD,EAAUN,KAAKS,IAIzG,OAFaH,EAAUL,QAAQQ,GAAcC,GAAUJ,EAAUL,QAAQM,GAAcD,EAAUL,QAAQQ,KAO3G9J,KAAKgK,iBAAkB,EACvBhK,KAAKiK,mBAAoB,EACzBjK,KAAKkK,mBAAoB,EAEzB,IAAMC,GAAa,WAClB,EAAKH,iBAAkB,GAElBI,GAAgB,SAAhBA,IACL,EAAK9O,OAAOuN,oBAAqB,YAAasB,IAAY,GAC1D,EAAK7O,OAAOuN,oBAAqB,UAAWuB,GAAe,IAStDC,GAAgB,SAACC,GACtBA,EAAEC,kBAGGC,GAAa,SAACvD,GAEnB,IAAIE,EAAQ,IAAI1R,IAChB0R,EAAMjQ,EAAM+P,EAAMG,QAAU3E,OAAOC,WAAe,EAAI,EACtDyE,EAAMhQ,GAAQ8P,EAAMI,QAAU5E,OAAOE,YAAgB,EAAI,EACzD,IAAIoE,EAAY,IAAItR,IACpBsR,EAAUY,cAAeR,EAAOrE,GAChC,IAAIoE,EAAaH,EAAUa,iBAAkB,EAAK9B,sBAAsB,GAExE,GAAIoB,EAAWlQ,OAAS,EAAG,CAC1B,IAAImP,EAAUe,EAAW,GAAG/I,OAAOgI,QAE/BsE,EAAa,IAAIhV,IAAc,EAAKwQ,cAAcE,GAAS,GAAI,EAAKF,cAAcE,GAAS,GAAI,KAC/FuE,EAAkB,IAAIjV,IAAc,EAAKwQ,cAAcE,GAAS,GAAI,EAAKF,cAAcE,GAAS,GAAI,GAEnG,EAAK8D,oBACTlH,EAAS4H,SAAU,EACnB,EAAKV,mBAAoB,EACzB,EAAK3O,OAAOyI,iBAAkB,QAASsG,IAAe,GACtD,IAAIhC,QAAavF,EAAOlL,UACtByF,GAAG,CAAEnG,EAAGuT,EAAWvT,EAAGC,EAAGsT,EAAWtT,EAAG8D,EAAGwP,EAAWxP,GAAK,KAC1DqN,OAAOD,SAAauC,UAAUC,IAC9BpC,UAAS,WACT1F,EAASxD,YAEToJ,YAAW,WACX5F,EAAS4H,SAAU,EACnB5H,EAASxD,SACT,EAAK0K,mBAAoB,EACzB,EAAK3O,OAAOuN,oBAAqB,QAASwB,IAAe,MAGzDzB,SAGE,EAAKsB,oBACTnH,EAAS4H,SAAU,EACnB,EAAKT,mBAAoB,EACzB,EAAK5O,OAAOyI,iBAAkB,QAASsG,IAAe,GACtD,IAAIhC,QAAatF,EAASmB,QACxB7G,GAAG,CAAEnG,EAAGwT,EAAgBxT,EAAGC,EAAGuT,EAAgBvT,EAAG8D,EAAGyP,EAAgBzP,GAAK,KACzEqN,OAAOD,SAAauC,UAAUC,IAC9BpC,UAAS,WACT1F,EAASxD,YAEToJ,YAAW,WACX5F,EAAS4H,SAAU,EACnB5H,EAASxD,SACT,EAAK2K,mBAAoB,EACzB,EAAK5O,OAAOuN,oBAAqB,QAASwB,IAAe,MAEzDzB,WAoBL5I,KAAK1E,OAAOyI,iBAAkB,SAdd,SAACuG,GACZxH,EAAOlL,SAASqD,EAAG,GAAK,EAAK+O,iBACjCQ,GAAWF,MAYoC,GAChDtK,KAAK1E,OAAOyI,iBAAkB,YAVX,SAACuG,GACnBA,EAAEC,iBACEzH,EAAOlL,SAASqD,GAAK,GAAK,EAAK+O,iBACnCQ,GAAWF,MAO0C,GACtDtK,KAAK1E,OAAOyI,iBAAkB,aAnFT,WACpB,EAAKiG,iBAAkB,EACvB,EAAK1O,OAAOyI,iBAAkB,YAAaoG,IAAY,GACvD,EAAK7O,OAAOyI,iBAAkB,UAAWqG,IAAe,MAgFA,GACzDpK,KAAK1E,OAAOyI,iBAAkB,YAAaiD,GAAwB,GACnEhH,KAAK1E,OAAOyI,iBAAkB,WAAW,WAAOhB,EAASgF,cAAe,KAAO,GAC/E/H,KAAK1E,OAAOyI,iBAAkB,aAAciD,GAAwB,GACpEhH,KAAK1E,OAAOyI,iBAAkB,YAAY,WAAOhB,EAASgF,cAAe,KAAO,GA8BhF/H,KAAK6C,MAAQA,EAEb7C,KAAK8K,QA1BW,SAACC,GACZ,EAAKlL,MAAME,MACdiL,sBAAuB,EAAKF,SAM7B/H,EAASxD,ST1jBZ,SAAmC0L,EAAWF,GAE7C,IAAMG,EAASD,EAAUxS,SAAS/C,SACzByV,EAASF,EAAUxS,SAASsE,WAElCmO,EAAOE,SAAQ,SAACpS,EAAQzD,GACpB,IAAM8V,EAAWF,EAAO5V,GAMlB+V,EAAkD,GAA3ChS,KAAKiS,IAAgB,KAAZR,EAAoBM,EAASnU,GAC7CsU,EAAmD,GAA5ClS,KAAKmS,IAAgB,MAAZV,EAAqBM,EAASpQ,GAEpDjC,EAAO9B,GAAKoU,EACZtS,EAAO7B,GAAKkU,EAASlU,EACrB6B,EAAOiC,GAAKuQ,EAERxS,EAAO7B,GAAI,MACX6B,EAAO7B,EAAI2D,MAKnBmQ,EAAUxS,SAASiT,oBAAqB,ESqiBzCC,CAA0B3O,EAAqB+N,GAI/C,IAAK,IAAIxV,EAAI,EAAGA,EAAI,EAAKqL,eAAe5J,OAAQzB,IAC/C,EAAKqL,eAAerL,GAAGgK,SAGxB8I,WACAhG,EAASuJ,OAAQ/I,EAAOC,IAUzB9C,KAAK6L,SAAS,CAACtM,QAASS,KAAKF,MAAMP,W,+BAU1B,IAAD,OAQR,OANIS,KAAKH,MAAME,MACVC,KAAK8K,SACRE,sBAAuBhL,KAAK8K,SAK7B,wBAAQgB,GAAG,IAAIC,IAAK,SAAAA,GAAG,OAAK,EAAKzQ,OAASyQ,S,GAzpBpBC,IAAMC,W,kBKzBhB,OAA0B,wCCqD1BC,G,kDA7Cd,WAAYrM,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,MAAQ,CAAEqM,MAAM,GAHJ,E,qDAMT,IAAD,OACR,OACC,qCACC,cAACC,GAAA,EAAD,CAAQC,QAAQ,UAAUC,QAAS,WAAO,EAAKT,SAAS,CAACM,MAAM,IAAQ,EAAKtM,MAAM0M,kBAAmBlL,MAAOrB,KAAKH,MAAM2M,YAAvH,gCAIA,eAACC,GAAA,EAAD,CACCN,KAAMnM,KAAKF,MAAMqM,KACjBO,OAAQ,WAAO,EAAKb,SAAS,CAACM,MAAM,IAAS,EAAKtM,MAAM8M,iBACxDC,gBAAgB,YAChBC,kBAAgB,qCAJjB,UAMC,qBAAK1L,IAAK2L,GAAOzL,MAAO,CAAC1F,MAAO,QAASoR,IAAI,KAC7C,cAACN,GAAA,EAAMO,OAAP,CAAcC,aAAW,EAAzB,SACC,cAACR,GAAA,EAAMS,MAAP,CAAapB,GAAG,qCAAhB,oCAID,cAACW,GAAA,EAAMU,KAAP,UAEC,+b,GA5BsBnB,IAAMC,WC4CnBmB,I,0EAtCd,WAAYvN,GAAQ,IAAD,8BAClB,cAAMA,IAMP0M,eAAiB,WAChB,EAAKV,SAAS,CAACc,eAAe,KARZ,EAWnBA,cAAgB,WACf,EAAKd,SAAS,CAACc,eAAe,KAT9B,EAAK7M,MAAQ,CAAE6M,eAAe,GAHZ,E,qDAiBjB,OACD,sBAAKU,UAAU,gBAAf,UAEE,cAAC,GAAD,CACDtN,KAAMC,KAAKF,MAAM6M,gBAGhB,qBAAKU,UAAU,qBAAf,SACD,qBAAKlM,IAAKmM,EAAQP,IAAI,OAErB,qBAAKM,UAAU,sBAAf,SACD,qBAAKlM,IAAKmM,EAAQP,IAAI,OAGrB,cAAC,GAAD,CAAeP,YAAa,CAAC5U,SAAU,WAAY2V,IAAK,OAAQhB,eAAgBvM,KAAKuM,eAAgBI,cAAe3M,KAAK2M,uB,GAhC3GX,IAAMC,YCATuB,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASrC,OACP,cAAC,IAAMsC,WAAP,UACE,cAAC,GAAD,MAEF3S,SAAS4S,eAAe,SAM1BX,O","file":"static/js/main.fe131bd1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/wreath.9030f228.png\";","import * as THREE from 'three';\r\nimport Delaunator from 'delaunator'; \r\n\r\nconst CALENDAR_WIDTH = 13\r\nconst CALENDAR_HEIGHT = 22\r\nconst CALENDAR_DEPTH = 2\r\n\r\nconst CALENDAR_INSIDE_COLOUR = 0x333333\r\n\r\nconst number_of_folds = 5\r\nconst fold_height_fraction = 0.03\r\nconst fold_triangle_width_fraction = 0.15\r\n\r\nconst tab_height_fraction = 0.3\r\nconst tab_width_fraction = 0.1\r\nconst tab_triangle_fraction = 0.1\r\n\r\nconst BASE_WIDTH = 1.5\r\nconst BASE_HEIGHT = 1.5\r\n// tabs spill over base width and height\r\n\r\nconst OUTLINE_L_MARGIN = 0.25\r\nconst OUTLINE_T_MARGIN = 0.25\r\nconst OUTLINE_R_MARGIN = 0.25\r\nconst OUTLINE_B_MARGIN = 0.25\r\n\r\nconst fold_width = BASE_WIDTH / number_of_folds\r\n\r\nconst stagger_val = -0.7\r\n\r\nfunction createDoorMesh() {\r\n\r\n\tvar geom = new THREE.Geometry();\r\n\tvar i\r\n\t// base folds\r\n\tfor (i = 0; i < number_of_folds; i++) {\r\n\t\tif (i === 0) {\r\n\t\t\tgeom.vertices.push(new THREE.Vector3( i*fold_width, 0, 0 ))\r\n\t\t\tgeom.vertices.push(new THREE.Vector3( i*fold_width, BASE_HEIGHT, 0 ))\r\n\t\t}\r\n\t\tgeom.vertices.push(new THREE.Vector3( (i+1)*fold_width, 0, 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( (i+1)*fold_width, BASE_HEIGHT, 0 ))\r\n\t\t\r\n\t\tgeom.faces.push(new THREE.Face3( 2*i, 2*i + 1, 2*i + 3 ))\r\n\t\tgeom.faces.push(new THREE.Face3( 2*i, 2*i + 3, 2*i + 2 ))\r\n\t}\r\n\t\r\n\t// number of points previously created\r\n\tvar fp = 2 + 2*number_of_folds\r\n\t\r\n\t// tab mesh\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 - tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 + tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 - tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 + tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 - (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 + (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( fp, fp + 1, fp + 3 ))\r\n\tgeom.faces.push(new THREE.Face3( fp, fp + 3, fp + 2 ))\r\n\tgeom.faces.push(new THREE.Face3( fp + 1, fp + 5, fp + 3 ))\r\n\tgeom.faces.push(new THREE.Face3( fp, fp + 2, fp + 4 ))\r\n\t\r\n\t// update number of points created\r\n\tfp = 2 + 2*number_of_folds + 6\r\n\t\r\n\t// fold detail (spillover)\r\n\tfor (i = 0; i < number_of_folds; i++) {\r\n\t\tgeom.vertices.push(new THREE.Vector3( i*fold_width, BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), BASE_HEIGHT, 0 ))\r\n\t\t\r\n\t\tgeom.faces.push(new THREE.Face3( 2*i+1, fp+6*i, fp+6*i+2 ))\r\n\t\tgeom.faces.push(new THREE.Face3( fp+6*i, fp+6*i+1, fp+6*i+2 ))\r\n\t\tgeom.faces.push(new THREE.Face3( fp+6*i+1, 2*i+3, fp+6*i+2 ))\r\n\t\t\r\n\t\tgeom.vertices.push(new THREE.Vector3( i*fold_width, 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), 0, 0 ))\r\n\t\t\r\n\t\tgeom.faces.push(new THREE.Face3( 2*i+1, fp+6*i+5, fp+6*i+3 ))\r\n\t\tgeom.faces.push(new THREE.Face3( fp+6*i+5, fp+6*i+4, fp+6*i+3 ))\r\n\t\tgeom.faces.push(new THREE.Face3( fp+6*i+5, 2*i+2, fp+6*i+4 ))\r\n\t}\r\n\t\r\n\treturn(geom)\r\n}\r\n\r\nfunction createDoorOutline(row, col, texture) {\r\n\tvar geom = new THREE.Geometry();\r\n\tvar doorOutlinePointsTop = []\r\n\tvar doorOutlinePointsBottom = []\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3( 0-OUTLINE_L_MARGIN, 0-OUTLINE_B_MARGIN, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-OUTLINE_L_MARGIN, BASE_HEIGHT+OUTLINE_T_MARGIN, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0, 0-OUTLINE_B_MARGIN, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0, BASE_HEIGHT+OUTLINE_T_MARGIN, 0 ))\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( 0, 1, 3 ))\r\n\tgeom.faces.push(new THREE.Face3( 0, 3, 2 ))\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3( 0, 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0, BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\tvar fp = 6\r\n\t\r\n\tdoorOutlinePointsBottom.push(new THREE.Vector3( 0, 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\tdoorOutlinePointsTop.push(new THREE.Vector3( 0, BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\r\n\r\n\tfor (var i = 0; i < number_of_folds; i++) {\r\n\t\t\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), 0-OUTLINE_B_MARGIN, 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width), 0, 0 ))\r\n\t\t\r\n\t\tdoorOutlinePointsBottom.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tdoorOutlinePointsBottom.push(new THREE.Vector3( ((i+1)*fold_width), 0, 0 ))\r\n\t\t\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), BASE_HEIGHT+OUTLINE_T_MARGIN, 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width), BASE_HEIGHT, 0 ))\r\n\t\t\r\n\t\tdoorOutlinePointsTop.push(new THREE.Vector3( ((i+1)*fold_width) - (fold_triangle_width_fraction*fold_width), BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tdoorOutlinePointsTop.push(new THREE.Vector3( ((i+1)*fold_width), BASE_HEIGHT, 0 ))\r\n\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width), 0-OUTLINE_B_MARGIN, 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width), BASE_HEIGHT+OUTLINE_T_MARGIN, 0 ))\r\n\t\t\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width), 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\tgeom.vertices.push(new THREE.Vector3( ((i+1)*fold_width), BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\t\r\n\t\tif (i < number_of_folds-1) {\r\n\t\t\tdoorOutlinePointsBottom.push(new THREE.Vector3( ((i+1)*fold_width), 0-(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\t\tdoorOutlinePointsTop.push(new THREE.Vector3( ((i+1)*fold_width), BASE_HEIGHT+(fold_height_fraction*BASE_HEIGHT), 0 ))\r\n\t\t}\r\n\t\t\r\n\t\tvar l = fp+10*i\r\n\t\t\r\n\t\tgeom.faces.push(new THREE.Face3( l-2, l+1, l ))\r\n\t\tgeom.faces.push(new THREE.Face3( l-4, l-2, l ))\r\n\t\tgeom.faces.push(new THREE.Face3( l+1, l+8, l+6 ))\r\n\t\tgeom.faces.push(new THREE.Face3( l, l+1, l+6 ))\r\n\t\tgeom.faces.push(new THREE.Face3( l+1, l+2, l+8 ))\r\n\t\t\r\n\t\tgeom.faces.push(new THREE.Face3( l-3, l+3, l+4 ))\r\n\t\tgeom.faces.push(new THREE.Face3( l-1, l-3, l+4 ))\r\n\t\tgeom.faces.push(new THREE.Face3( l+4, l+3, l+9 ))\r\n\t\tgeom.faces.push(new THREE.Face3( l+9, l+3, l+7 ))\r\n\t\tgeom.faces.push(new THREE.Face3( l+4, l+9, l+5 ))\r\n\t\t\r\n\t}\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 - (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 - tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 - (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, 0-OUTLINE_B_MARGIN, 0 ))\r\n\t\r\n\tdoorOutlinePointsBottom.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 - (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\tdoorOutlinePointsBottom.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 - tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 + (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 + tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 + (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT+OUTLINE_T_MARGIN, 0 ))\r\n\t\r\n\tdoorOutlinePointsTop.push(new THREE.Vector3( BASE_WIDTH, BASE_HEIGHT/2 + (tab_height_fraction*BASE_HEIGHT/2 + tab_triangle_fraction*BASE_HEIGHT), 0 ))\r\n\tdoorOutlinePointsTop.push(new THREE.Vector3( BASE_WIDTH + tab_width_fraction*BASE_WIDTH, BASE_HEIGHT/2 + tab_height_fraction*BASE_HEIGHT/2, 0 ))\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + OUTLINE_R_MARGIN, 0-OUTLINE_B_MARGIN, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( BASE_WIDTH + OUTLINE_R_MARGIN, BASE_HEIGHT+OUTLINE_T_MARGIN, 0 ))\r\n\r\n\tl = fp+10*number_of_folds\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( l, l+1, l+2 ))\r\n\tgeom.faces.push(new THREE.Face3( l, l+3, l-4 ))\r\n\tgeom.faces.push(new THREE.Face3( l, l+2, l+3 ))\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( l+4, l+6, l+5 ))\r\n\tgeom.faces.push(new THREE.Face3( l-3, l+6, l+4 ))\r\n\tgeom.faces.push(new THREE.Face3( l-3, l+7, l+6 ))\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( l+3, l+7, l+8 ))\r\n\tgeom.faces.push(new THREE.Face3( l+8, l+7, l+9 ))\r\n\t\r\n\tvar stagger = stagger_val*(col%2)\r\n\tvar offset_position_x = -CALENDAR_WIDTH/2+1+(col*3)+OUTLINE_L_MARGIN\r\n\tvar offset_position_y = CALENDAR_HEIGHT/2-((row+1)*3)+OUTLINE_B_MARGIN + stagger\r\n\t\r\n\tvar uv_array\r\n\tvar uv_x\r\n\tvar uv_y\r\n\tvar vertex_id\r\n\tvar face\r\n\tfor ( let face_id = 0; face_id < geom.faces.length; face_id ++ ) {\r\n\t\tface = geom.faces[face_id]\r\n\t\tuv_array = []\r\n\t\t// console.log(face)\r\n\t\tvertex_id = face.a\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geom.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geom.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\t\tvertex_id = face.b\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geom.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geom.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\t\tvertex_id = face.c\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geom.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geom.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\r\n\t\t// console.log(uv_array)\r\n\t\tgeom.faceVertexUvs[0].push(uv_array)\r\n\t}\r\n\t\r\n\tconst material_outline = new THREE.MeshBasicMaterial( { map: texture, wireframe: false, side: THREE.DoubleSide } );\r\n\r\n\t// const material_outline = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: false, side: THREE.DoubleSide } );\r\n\tconst mesh_outline = new THREE.Mesh( geom, material_outline );\r\n\t\r\n\t// var stagger = stagger_val*(col%2)\r\n\tmesh_outline.position.set(-CALENDAR_WIDTH/2+1+(col*3)+OUTLINE_L_MARGIN, CALENDAR_HEIGHT/2-((row+1)*3)+OUTLINE_B_MARGIN + stagger, 0)\r\n\r\n\tvar doorOutlinePoints = doorOutlinePointsTop.concat(doorOutlinePointsBottom.reverse())\r\n\t\r\n\tconst doorOutlineGeom = new THREE.BufferGeometry().setFromPoints( doorOutlinePoints );\r\n\tconst doorOutlineMaterial = new THREE.LineBasicMaterial( { color: 0x000000 } );\r\n\tconst line = new THREE.Line( doorOutlineGeom, doorOutlineMaterial );\r\n\t\r\n\tline.position.set(-CALENDAR_WIDTH/2+1+(col*3)+OUTLINE_L_MARGIN, CALENDAR_HEIGHT/2-((row+1)*3)+OUTLINE_B_MARGIN + stagger, 0.001)\r\n\r\n\treturn([mesh_outline, line])\r\n}\r\n\r\nfunction createDoorSkeleton() {\r\n\t\r\n\tvar bones = []\r\n\tvar bone = new THREE.Bone()\r\n\tbone.position.x = 0 \r\n\tbone.position.y = 0.5\r\n\tbones.push(bone)\r\n\t\r\n\tvar prevBone = bone\r\n\tfor (var i = 0; i < number_of_folds; i++) {\r\n\t\tbone = new THREE.Bone()\r\n\t\tbone.position.x = fold_width \r\n\t\t//bone.position.y = 0.5\r\n\t\tbones.push(bone)\r\n\t\tprevBone.add( bone )\r\n\t\tprevBone = bone\r\n\t\t\r\n\t}\r\n\t\r\n\tbone = new THREE.Bone()\r\n\tbone.position.x = tab_width_fraction*BASE_WIDTH \r\n\t//bone.position.y = 0.5\r\n\tbones.push(bone)\r\n\tprevBone.add( bone )\r\n\t\r\n\tconst skeleton = new THREE.Skeleton( bones );\r\n\t\r\n\treturn(skeleton)\r\n}\r\n\r\nfunction createDoor(row, col, texture_front, texture_back) {\r\n\tconst geometry = new createDoorMesh();\r\n\t\r\n\tvar stagger = stagger_val*(col%2)\r\n\tvar offset_position_x = -CALENDAR_WIDTH/2+1+(col*3)+OUTLINE_L_MARGIN\r\n\tvar offset_position_y = CALENDAR_HEIGHT/2-((row+1)*3)+OUTLINE_B_MARGIN + stagger\r\n\t\r\n\tvar uv_array\r\n\tvar uv_x\r\n\tvar uv_y\r\n\tvar vertex_id\r\n\tvar face\r\n\tfor ( let face_id = 0; face_id < geometry.faces.length; face_id ++ ) {\r\n\t\tface = geometry.faces[face_id]\r\n\t\tuv_array = []\r\n\t\t// console.log(face)\r\n\t\tvertex_id = face.a\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geometry.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geometry.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\t\tvertex_id = face.b\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geometry.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geometry.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\t\tvertex_id = face.c\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geometry.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geometry.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\r\n\t\t// console.log(uv_array)\r\n\t\tgeometry.faceVertexUvs[0].push(uv_array)\r\n\t}\r\n\t\r\n\tgeometry.computeFaceNormals();\t\r\n\tgeometry.computeVertexNormals();\r\n\tgeometry.uvsNeedUpdate = true\r\n\t\r\n\tvar bufferGeometry = new THREE.BufferGeometry().fromGeometry( geometry );\r\n\t\r\n\tconst position = bufferGeometry.attributes.position;\r\n\r\n\tconst vertex = new THREE.Vector3();\r\n\r\n\tconst skinIndices = [];\r\n\tconst skinWeights = [];\r\n\r\n\tfor ( let i = 0; i < position.count; i ++ ) {\r\n\r\n\t\tvertex.fromBufferAttribute( position, i );\r\n\r\n\t\t// compute skinIndex and skinWeight based on some configuration data\r\n\t\tconst skinIndex = Math.floor( vertex.x / fold_width );\r\n\t\t// const skinWeight = ( x % fold_width ) / fold_width;\r\n\t\tconst skinWeight = 0;\r\n\r\n\t\tskinIndices.push( skinIndex, skinIndex + 1, 0, 0 );\r\n\t\tskinWeights.push( 1 - skinWeight, skinWeight, 0, 0 );\r\n\r\n\t}\r\n\r\n\tbufferGeometry.setAttribute( 'skinIndex', new THREE.Uint16BufferAttribute( skinIndices, 4 ) );\r\n\tbufferGeometry.setAttribute( 'skinWeight', new THREE.Float32BufferAttribute( skinWeights, 4 ) );\r\n\t\r\n\t\r\n\tconst material_front = new THREE.MeshBasicMaterial( { map: texture_front, wireframe: false, side: THREE.BackSide, skinning: true } );\r\n\t// const material_front = new THREE.MeshBasicMaterial( { color: 0xffffff, wireframe: false, side: THREE.BackSide, skinning: true } );\r\n\t\r\n\tconst material_back = new THREE.MeshBasicMaterial( { map: texture_back, wireframe: false, side: THREE.FrontSide, skinning: true } );\r\n\t// const material_back = new THREE.MeshBasicMaterial( { color: 0x333333, wireframe: false, side: THREE.FrontSide, skinning: true } );\r\n\tvar meshFront = new THREE.SkinnedMesh( bufferGeometry, material_front)\r\n\tvar meshBack = new THREE.SkinnedMesh( bufferGeometry, material_back)\r\n\t\r\n\tconst skeleton = createDoorSkeleton();\r\n\tconst rootBone = skeleton.bones[ 0 ];\r\n\tmeshFront.add( rootBone );\r\n\tmeshFront.bind( skeleton );\r\n\tmeshBack.add( rootBone );\r\n\tmeshBack.bind( skeleton );\r\n\t\r\n\t// skeleton.bones[0].rotation.y = -0.8;\r\n\t// skeleton.bones[1].rotation.y = -0.8;\r\n\t// skeleton.bones[2].rotation.y = -0.8;\r\n\t// skeleton.bones[3].rotation.y = -0.8;\r\n\t// skeleton.bones[4].rotation.y = -0.8;\r\n\t\r\n\t\r\n\t\r\n\tmeshFront.position.set(offset_position_x, offset_position_y, 0)\r\n\tmeshBack.position.set(offset_position_x, offset_position_y, 0)\r\n\t\r\n\t// console.log(meshFront)\r\n\t\r\n\t\r\n\tvar meshPosition = [offset_position_x + BASE_WIDTH/2, offset_position_y + BASE_HEIGHT/2]\r\n\treturn([meshFront, meshBack, meshPosition])\r\n}\r\n\r\n\r\nfunction createAdventFrontPanel(texture) {\r\n\tconst WIDTH = CALENDAR_WIDTH\r\n\tconst HEIGHT = CALENDAR_HEIGHT\r\n\t\r\n\tvar geom = new THREE.Geometry();\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0-HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0+HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0-HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0+HEIGHT/2, 0 ))\r\n\t\r\n\t\r\n\tvar door_points_lists = []\r\n\tvar fp = 4\r\n\tvar i\r\n\tvar j\r\n\tfor (i = 0; i < 6; i++) {\r\n\t\tfor (j = 0; j < 4; j++) {\r\n\t\t\t\r\n\t\t\tvar stagger = stagger_val*(j%2)\r\n\t\t\t\r\n\t\t\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j, HEIGHT/2 - 1 - 3*i + stagger, 0 ))\r\n\t\t\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j, HEIGHT/2 - 1 - 3*i - 2 + stagger, 0 ))\r\n\t\t\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j + 2, HEIGHT/2 - 1 - 3*i + stagger, 0 ))\r\n\t\t\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j + 2, HEIGHT/2 - 1 - 3*i - 2 + stagger, 0 ))\r\n\t\t\t\r\n\t\t\tdoor_points_lists.push([fp, fp+1, fp+2, fp+3])\r\n\t\t\t// geom.faces.push(new THREE.Face3( fp, fp+1, fp+2))\r\n\t\t\t// geom.faces.push(new THREE.Face3( fp+1, fp+3, fp+2))\r\n\t\t\tfp += 4\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\ti = 6\r\n\tj = 2\r\n\tstagger = stagger_val*(j%2)\r\n\t\r\n\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j, HEIGHT/2 - 1 - 3*i + stagger, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j, HEIGHT/2 - 1 - 3*i - 2 + stagger, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j + 2, HEIGHT/2 - 1 - 3*i + stagger, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3(-WIDTH/2 + 1 + 3*j + 2, HEIGHT/2 - 1 - 3*i - 2 + stagger, 0 ))\r\n\t\r\n\tdoor_points_lists.push([fp, fp+1, fp+2, fp+3])\r\n\t// geom.faces.push(new THREE.Face3( fp, fp+1, fp+2))\r\n\t// geom.faces.push(new THREE.Face3( fp+1, fp+3, fp+2))\r\n\tfp += 4\r\n\t\r\n\t// get array of vertices\r\n\tvar positions = geom.vertices\r\n\tvar positions_array = []\r\n\tfor (i = 0; i < positions.length; i++) {\r\n\t\tvar v = positions[i]\r\n\t\tpositions_array.push([v.x, v.y]) \r\n\t}\r\n\t\r\n\t\r\n\tvar triangles = Delaunator.from(positions_array).triangles\r\n\tfor (i = 0; i < triangles.length; i+=3) {\r\n\t\tvar triangle = [triangles[i], triangles[i+1], triangles[i+2]]\r\n\t\tvar add_face = true\r\n\t\tfor (j = 0; j < door_points_lists.length; j++) {\r\n\t\t\tvar door_points = door_points_lists[j]\r\n\t\t\tif (door_points.includes(triangle[0]) && door_points.includes(triangle[1]) && door_points.includes(triangle[2])) {\r\n\t\t\t\tadd_face = false\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (add_face) {\r\n\t\t\tgeom.faces.push(new THREE.Face3( triangle[0], triangle[1], triangle[2]))\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar offset_position_x = 0\r\n\tvar offset_position_y = 0\r\n\tvar uv_array\r\n\tvar uv_x\r\n\tvar uv_y\r\n\tvar vertex_id\r\n\tvar face\r\n\tfor ( let face_id = 0; face_id < geom.faces.length; face_id ++ ) {\r\n\t\tface = geom.faces[face_id]\r\n\t\tuv_array = []\r\n\t\t// console.log(face)\r\n\t\tvertex_id = face.a\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geom.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geom.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\t\tvertex_id = face.b\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geom.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geom.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\t\tvertex_id = face.c\r\n\t\tuv_x = (CALENDAR_WIDTH/2 + (geom.vertices[vertex_id].x + offset_position_x)) / CALENDAR_WIDTH\r\n\t\tuv_y = ((CALENDAR_HEIGHT/2 + (geom.vertices[vertex_id].y + offset_position_y)) / CALENDAR_HEIGHT)\r\n\t\tuv_array.push(new THREE.Vector2(uv_x, uv_y))\r\n\r\n\t\t// console.log(uv_array)\r\n\t\tgeom.faceVertexUvs[0].push(uv_array)\r\n\t}\r\n\tgeom.faceVertexUvs[1] = geom.faceVertexUvs[0] \r\n\r\n\tconst material = new THREE.MeshBasicMaterial( { map: texture, wireframe: false, side: THREE.DoubleSide } );\r\n\t// const material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: false, side: THREE.DoubleSide } );\r\n\tconst mesh = new THREE.Mesh( geom, material );\r\n\t\r\n\treturn(mesh)\r\n\t\r\n}\r\n\r\nfunction getTabFaceIndexArray() {\r\n\tlet fp = 2*number_of_folds\r\n\treturn [fp, fp+1, fp+2, fp+3]\r\n\t\r\n}\r\n\r\nfunction createSidePanelLeft(texture) {\r\n\tconst WIDTH = CALENDAR_WIDTH\r\n\tconst HEIGHT = CALENDAR_HEIGHT\r\n\t\r\n\tvar offset = 0\r\n\tvar material\r\n\tif (!texture) {\r\n\t\toffset = 0.01\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { color: CALENDAR_INSIDE_COLOUR, wireframe: false, side: THREE.DoubleSide } );\r\n\t} else {\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { map: texture, wireframe: false, side: THREE.DoubleSide } );\r\n\t}\r\n\t\r\n\tvar geom = new THREE.Geometry();\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2+offset, 0-HEIGHT/2, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2+offset, 0+HEIGHT/2, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2+offset, 0-HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2+offset, 0+HEIGHT/2, 0 ))\r\n\t\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(0,0), new THREE.Vector2(0,1), new THREE.Vector2(1,0)])\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(1,0), new THREE.Vector2(0,1), new THREE.Vector2(1,1)])\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( 0, 1, 2 ))\r\n\tgeom.faces.push(new THREE.Face3( 2, 1, 3 ))\r\n\t\t\r\n\tvar sideMesh = new THREE.Mesh(geom, material)\r\n\t\t\r\n\treturn sideMesh\r\n}\r\n\r\nfunction createSidePanelRight(texture) {\r\n\tconst WIDTH = CALENDAR_WIDTH\r\n\tconst HEIGHT = CALENDAR_HEIGHT\r\n\t\r\n\tvar offset = 0\r\n\tvar material\r\n\tif (!texture) {\r\n\t\toffset = 0.01\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { color: CALENDAR_INSIDE_COLOUR, wireframe: false, side: THREE.DoubleSide } );\r\n\t} else {\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { map: texture, wireframe: false, side: THREE.DoubleSide } );\r\n\t}\r\n\t\r\n\tvar geom = new THREE.Geometry();\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2-offset, 0-HEIGHT/2, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2-offset, 0+HEIGHT/2, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2-offset, 0-HEIGHT/2, 0))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2-offset, 0+HEIGHT/2, 0 ))\r\n\t\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(0,0), new THREE.Vector2(0,1), new THREE.Vector2(1,0)])\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(1,0), new THREE.Vector2(0,1), new THREE.Vector2(1,1)])\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( 0, 1, 2 ))\r\n\tgeom.faces.push(new THREE.Face3( 2, 1, 3 ))\r\n\t\t\r\n\tvar sideMesh = new THREE.Mesh(geom, material)\r\n\t\t\r\n\treturn sideMesh\r\n}\r\n\r\nfunction createSidePanelTop(texture) {\r\n\tconst WIDTH = CALENDAR_WIDTH\r\n\tconst HEIGHT = CALENDAR_HEIGHT\r\n\t\r\n\tvar offset = 0\r\n\tvar material\r\n\tif (!texture) {\r\n\t\toffset = 0.01\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { color: CALENDAR_INSIDE_COLOUR, wireframe: false, side: THREE.DoubleSide } );\r\n\t} else {\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { map: texture, wireframe: false, side: THREE.DoubleSide } );\r\n\t}\r\n\t\r\n\tvar geom = new THREE.Geometry();\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0+HEIGHT/2-offset, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0+HEIGHT/2-offset, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0+HEIGHT/2-offset, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0+HEIGHT/2-offset, 0 ))\r\n\t\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(0,0), new THREE.Vector2(0,1), new THREE.Vector2(1,0)])\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(1,0), new THREE.Vector2(0,1), new THREE.Vector2(1,1)])\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( 0, 1, 2 ))\r\n\tgeom.faces.push(new THREE.Face3( 2, 1, 3 ))\r\n\t\t\r\n\tvar sideMesh = new THREE.Mesh(geom, material)\r\n\t\t\r\n\treturn sideMesh\r\n}\r\n\r\nfunction createSidePanelBottom(texture) {\r\n\tconst WIDTH = CALENDAR_WIDTH\r\n\tconst HEIGHT = CALENDAR_HEIGHT\r\n\t\r\n\tvar offset = 0\r\n\tvar material\r\n\tif (!texture) {\r\n\t\toffset = 0.01\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { color: CALENDAR_INSIDE_COLOUR, wireframe: false, side: THREE.DoubleSide } );\r\n\t} else {\r\n\t\tmaterial = new THREE.MeshBasicMaterial( { map: texture, wireframe: false, side: THREE.DoubleSide } );\r\n\t}\r\n\t\r\n\tvar geom = new THREE.Geometry();\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0-HEIGHT/2+offset, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0-HEIGHT/2+offset, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0-HEIGHT/2+offset, -CALENDAR_DEPTH ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0-HEIGHT/2+offset, 0 ))\r\n\t\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(0,0), new THREE.Vector2(0,1), new THREE.Vector2(1,0)])\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(1,0), new THREE.Vector2(0,1), new THREE.Vector2(1,1)])\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( 0, 1, 2 ))\r\n\tgeom.faces.push(new THREE.Face3( 2, 1, 3 ))\r\n\t\t\r\n\tvar sideMesh = new THREE.Mesh(geom, material)\r\n\t\t\r\n\treturn sideMesh\r\n}\r\n\r\nfunction createBackPanel(texture) {\r\n\tconst WIDTH = CALENDAR_WIDTH\r\n\tconst HEIGHT = CALENDAR_HEIGHT\r\n\tvar geom = new THREE.Geometry();\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0-HEIGHT/2, 0\t))\r\n\tgeom.vertices.push(new THREE.Vector3( 0-WIDTH/2, 0+HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0-HEIGHT/2, 0 ))\r\n\tgeom.vertices.push(new THREE.Vector3( 0+WIDTH/2, 0+HEIGHT/2, 0 ))\r\n\t\r\n\tgeom.faces.push(new THREE.Face3( 0, 1, 2 ))\r\n\tgeom.faces.push(new THREE.Face3( 2, 1, 3 ))\r\n\t\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(0,0), new THREE.Vector2(0,1), new THREE.Vector2(1,0)])\r\n\tgeom.faceVertexUvs[0].push([new THREE.Vector2(1,0), new THREE.Vector2(0,1), new THREE.Vector2(1,1)])\r\n\t\r\n\tconst material = new THREE.MeshBasicMaterial( {map: texture, color: CALENDAR_INSIDE_COLOUR, wireframe: false, side: THREE.DoubleSide } );\r\n\t\r\n\tvar backMesh = new THREE.Mesh(geom, material)\r\n\t\r\n\tbackMesh.position.set(0,0,-CALENDAR_DEPTH)\r\n\t\r\n\treturn backMesh\r\n}\r\n\r\n\r\n\r\n\r\nexport {createDoor, createDoorOutline, createAdventFrontPanel, getTabFaceIndexArray, createSidePanelLeft, createSidePanelRight, createSidePanelTop, createSidePanelBottom, createBackPanel}","import * as THREE from 'three';\r\n\r\nconst particleNum = 5000;\r\nconst maxRange = 1000;\r\nconst minRange = maxRange / 2;\r\nconst textureSize = 8.0;\r\n\r\nconst drawRadialGradation = (ctx, canvasRadius, canvasW, canvasH) => {\r\n    ctx.save();\r\n    const gradient = ctx.createRadialGradient(canvasRadius,canvasRadius,0,canvasRadius,canvasRadius,canvasRadius);\r\n    gradient.addColorStop(0, 'rgba(255,255,255,1.0)');\r\n    gradient.addColorStop(0.5, 'rgba(255,255,255,0.5)');\r\n    gradient.addColorStop(1, 'rgba(255,255,255,0)');\r\n    ctx.fillStyle = gradient;\r\n    ctx.fillRect(0,0,canvasW,canvasH);\r\n    ctx.restore();\r\n}\r\n\r\nconst getTexture = () => {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    const diameter = textureSize;\r\n    canvas.width = diameter;\r\n    canvas.height = diameter;\r\n    const canvasRadius = diameter / 2;\r\n\r\n    /* gradation circle\r\n    ------------------------ */\r\n    drawRadialGradation(ctx, canvasRadius, canvas.width, canvas.height);\r\n    \r\n    /* snow crystal\r\n    ------------------------ */\r\n    // drawSnowCrystal(ctx, canvasRadius);\r\n\r\n    const texture = new THREE.Texture(canvas);\r\n    //texture.minFilter = THREE.NearestFilter;\r\n    texture.type = THREE.FloatType;\r\n    texture.needsUpdate = true;\r\n    return texture;\r\n}\r\n\r\nconst pointGeometry = new THREE.Geometry();\r\nfor (let i = 0; i < particleNum; i++) {\r\n\tconst x = Math.floor(Math.random() * maxRange - minRange);\r\n\tconst y = Math.floor(Math.random() * maxRange - minRange);\r\n\tconst z = Math.floor(Math.random() * maxRange - minRange);\r\n\tconst particle = new THREE.Vector3(x, y, z);\r\n\tpointGeometry.vertices.push(particle);\r\n\t// const color = new THREE.Color(0xffffff);\r\n\t// pointGeometry.colors.push(color);\r\n}\r\n\r\nconst pointMaterial = new THREE.PointsMaterial({\r\n\tsize: 8,\r\n\tcolor: 0xffffff,\r\n\tvertexColors: false,\r\n\tmap: getTexture(),\r\n\t// blending: THREE.AdditiveBlending,\r\n\ttransparent: true,\r\n\t// opacity: 0.8,\r\n\tfog: true,\r\n\tdepthWrite: false\r\n});\r\n\r\nconst velocities = [];\r\nfor (let i = 0; i < particleNum; i++) {\r\n\tconst x = Math.floor(Math.random() * 6 - 3) * 0.1;\r\n\tconst y = Math.floor(Math.random() * 10 + 3) * - 0.05;\r\n\tconst z = Math.floor(Math.random() * 6 - 3) * 0.1;\r\n\tconst particle = new THREE.Vector3(x, y, z);\r\n\tvelocities.push(particle);\r\n}\r\n\r\nvar snowEffectParticles = new THREE.Points(pointGeometry, pointMaterial);\r\nsnowEffectParticles.geometry.velocities = velocities;\r\n\r\n\r\nfunction updateSnowEffectParticles(particles, timeStamp) {\r\n\r\n\tconst posArr = particles.geometry.vertices;\r\n    const velArr = particles.geometry.velocities;\r\n\r\n    posArr.forEach((vertex, i) => {\r\n        const velocity = velArr[i];\r\n\r\n        // const x = i * 3;\r\n        // const y = i * 3 + 1;\r\n        // const z = i * 3 + 2;\r\n        \r\n        const velX = Math.sin(timeStamp * 0.001 * velocity.x) * 0.1;\r\n        const velZ = Math.cos(timeStamp * 0.0015 * velocity.z) * 0.1;\r\n        \r\n        vertex.x += velX;\r\n        vertex.y += velocity.y;\r\n        vertex.z += velZ;\r\n\r\n        if (vertex.y < -minRange ) {\r\n            vertex.y = minRange;\r\n        }\r\n\r\n    })\r\n\r\n    particles.geometry.verticesNeedUpdate = true;\r\n}\r\n\r\n\r\nexport {snowEffectParticles, updateSnowEffectParticles}\r\n\r\n","\r\n// explosion confetti from https://github.com/mrgoonie/three.confetti.explosion.js/blob/master/src/three.confetti.explode.js\r\nimport * as THREE from 'three'; \r\n\r\nMath.Drandom = function(number) {\r\n\treturn number * Math.random();\r\n}\r\n\r\nMath.DrandomFromTo = function(from, to) {\r\n\treturn from + (Math.random() * (to - from))\r\n}\r\n\r\nMath.DrandomPlusMinus = function(val) {\r\n\t// return val*(Math.random() < 0.5 ? -1 : 1)\r\n\t// return val*2*(Math.random()-0.5)\r\n\treturn val * (Math.random() - Math.random());\r\n}\r\n\r\nconst getRandom = function(array) {\r\n\treturn array[Math.floor( Math.random() * array.length)]\r\n}\r\n\r\nconst objectMerge = function(object, toObject){\r\n\tvar obj = JSON.parse(JSON.stringify(toObject))\r\n\tfor(var key in object){\r\n\t\tvar val = object[key];\r\n\t\tobj[key] = val;\r\n\t}\r\n\treturn obj;\r\n}\r\n\r\n\r\nfunction ExplosionConfetti(options, position, rotation){\r\n\r\n\tvar _options = {\r\n\t\tamount: 150,\r\n\t\tsize: 0.02,\r\n\t\tradius: 300,\r\n\t\tareaWidth: 10,\r\n\t\tareaHeight: 10,\r\n\t\tfallingHeight: 3,\r\n\t\tfallingSpeed: 0.01,\r\n\t\tcolors: [0xCE1713, 0xD5B534, 0x0F7833]\r\n\t};\r\n\tif(options) {options = objectMerge(options, _options)}\r\n\telse {options = _options};\r\n\t\r\n\t\r\n\tvar boom = new THREE.Object3D();\r\n\tboom.life = Math.DrandomFromTo(500, 500);\r\n\t// boom.position.x = -(options.areaWidth/2) + areaWidth * Math.random();\r\n\t// boom.position.y = options.fallingHeight + Math.DrandomPlusMinus(0.2*areaHeight);\r\n\t// boom.position.z = -(options.areaWidth/2) + options.areaWidth * Math.random();\r\n\tboom.position.set(position.x, position.y, position.z)\r\n\tboom.rotation.set(rotation.x, rotation.y, rotation.z)\r\n\r\n\t\r\n\tfor(var i=0; i<options.amount; i++){\r\n\t\tvar geometry = new THREE.PlaneBufferGeometry(options.size, options.size);\r\n\t\tvar material = new THREE.MeshBasicMaterial( {color: getRandom(options.colors), transparent: true, side: THREE.DoubleSide} );\r\n\t\tvar particle = new THREE.Mesh( geometry, material );\r\n\t\tboom.add( particle );\r\n\r\n\t\tparticle.life = 1;\r\n\t\t\r\n\t\tparticle.position.set(0,0,0)\r\n\r\n\t\tparticle.destination = {};\r\n\t\tparticle.destination.x = ( Math.random() - 0.5) * (options.radius*2) * Math.random();\r\n\t\tparticle.destination.y = ( Math.random() - 0.5) * (options.radius*2) * Math.random();\r\n\t\tparticle.destination.z = ( Math.random() - 0.5) * (options.radius*2) * Math.random();\r\n\r\n\t\tparticle.rotation.x = Math.Drandom(360);\r\n\t\tparticle.rotation.y = Math.Drandom(360);\r\n\t\tparticle.rotation.z = Math.Drandom(360);\r\n\r\n\t\tvar size = Math.DrandomFromTo(2, 5);\r\n\t\tparticle.scale.x = size;\r\n\t\tparticle.scale.y = size;\r\n\r\n\t\tparticle.rotateSpeedX = Math.DrandomPlusMinus(0.4);\r\n\t\tparticle.rotateSpeedY = Math.DrandomPlusMinus(0.4);\r\n\t\tparticle.rotateSpeedZ = Math.DrandomPlusMinus(0.4);\r\n\t}\r\n\t\r\n\tboom.dispose = function() {\r\n\t\tif (boom) {\r\n\t\t\tboom.position.set(0,0,0)\r\n\t\t\tfor(var i=0; i < boom.children.length; i++){\r\n\t\t\t\tvar particle = boom.children[i];\r\n\t\t\t\tparticle.material.dispose();\r\n\t\t\t\tparticle.geometry.dispose();\r\n\t\t\t\tboom.remove( particle );\r\n\t\t\t\tparticle = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tboom.parent.remove( boom );\r\n\t\t\tboom = null;\r\n\t\t}\r\n\t};\r\n\t\r\n\tboom.update = () => {\r\n\t\t\r\n\t\tif (boom) {\r\n\t\t\tfor(var k=0; k < boom.children.length; k++){\r\n\t\t\t\tvar particle = boom.children[k];\r\n\r\n\t\t\t\tparticle.destination.y -= Math.DrandomFromTo(3,6);\r\n\t\t\t\tparticle.life -= Math.DrandomFromTo(0.005, 0.01);\r\n\r\n\t\t\t\tvar speedX = options.fallingSpeed * (particle.destination.x - particle.position.x) / 80;\r\n\t\t\t\tvar speedY = 0.5*options.fallingSpeed * (particle.destination.y - particle.position.y) / 80;\r\n\t\t\t\tvar speedZ = options.fallingSpeed * (particle.destination.z - particle.position.z) / 80;\r\n\r\n\t\t\t\tparticle.position.x += speedX;\r\n\t\t\t\tparticle.position.y += speedY;\r\n\t\t\t\tparticle.position.z += speedZ;\r\n\r\n\t\t\t\tparticle.rotation.y += particle.rotateSpeedY;\r\n\t\t\t\tparticle.rotation.x += particle.rotateSpeedX;\r\n\t\t\t\tparticle.rotation.z += particle.rotateSpeedZ;\r\n\r\n\t\t\t\t// particle.material.opacity -= Math.DrandomFromTo(0.005, 0.01);\r\n\r\n\t\t\t\tif(particle.position.y < -options.fallingHeight){\r\n\t\t\t\t\tparticle.material.dispose();\r\n\t\t\t\t\tparticle.geometry.dispose();\r\n\t\t\t\t\tboom.remove(particle);\r\n\t\t\t\t\tparticle = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(boom.children.length <= 10){\r\n\t\t\t\tboom.dispose();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t// document.getElementById(\"particleCount\").innerHTML = particleAmount;\r\n\t};\r\n\t\r\n\treturn boom\r\n\r\n\r\n\r\n}\r\n\r\nexport default ExplosionConfetti","export default __webpack_public_path__ + \"static/media/advent_background.44b6c84d.png\";","export default __webpack_public_path__ + \"static/media/advent_background_rear.6c826e55.png\";","export default __webpack_public_path__ + \"static/media/cardboard_back.546c6121.jpg\";","export default __webpack_public_path__ + \"static/media/test.ff137c04.mp3\";","export default __webpack_public_path__ + \"static/media/test2.db6ca414.mp3\";","export default __webpack_public_path__ + \"static/media/test3.c40de50b.mp3\";","export default __webpack_public_path__ + \"static/media/cheering.31ae307a.mp3\";","import React from 'react';\r\nimport * as THREE from 'three';\r\nimport * as TWEEN from 'tween.js'\r\nimport {OrbitControls} from \"three/examples/jsm/controls/OrbitControls\";\r\nimport {createDoor, createDoorOutline, createAdventFrontPanel, getTabFaceIndexArray,  createSidePanelLeft, createSidePanelRight, createSidePanelTop, createSidePanelBottom, createBackPanel} from './MeshCreation'\r\nimport {snowEffectParticles, updateSnowEffectParticles} from './SnowEffect'\r\nimport ExplosionConfetti from './explosionConfetti2'\r\n\r\n// import bodie_test from '../images/bodie_test.jpg'\r\nimport advent_background from '../images/advent_background.png'\r\nimport advent_background_rear from '../images/advent_background_rear.png'\r\nimport cardboard_rear from '../images/cardboard_back.jpg'\r\nimport advent_side_left from '../images/advent_side_left.png'\r\nimport advent_side_right from '../images/advent_side_right.png'\r\nimport advent_side_top from '../images/advent_side_top.png'\r\nimport advent_side_bottom from '../images/advent_side_bottom.png'\r\n\r\nimport sound1 from \"../sounds/test.mp3\"\r\nimport sound2 from \"../sounds/test2.mp3\"\r\nimport sound3 from \"../sounds/test3.mp3\"\r\nimport sound4 from \"../sounds/test2.mp3\"\r\nimport sound5 from \"../sounds/test.mp3\"\r\n\r\nimport sound_cheer from \"../sounds/cheering.mp3\"\r\n\r\nclass Calendar3D extends React.Component {\r\n\tconstructor(props) {\r\n\t  super(props);\r\n\t  // Don't call this.setState() here!\r\n\t  this.state = { play: this.props.play,\r\n\t\t\t\t\t update: false};\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// this.front_texture = new THREE.TextureLoader().load(\"https://i.imgur.com/5FTxFXe.jpg\")\r\n\t\tthis.front_texture = new THREE.TextureLoader().load(advent_background)\r\n\t\tthis.back_texture = new THREE.TextureLoader().load(advent_background_rear)\r\n\t\tthis.side_texture_left = new THREE.TextureLoader().load(advent_side_left)\r\n\t\tthis.side_texture_right = new THREE.TextureLoader().load(advent_side_right)\r\n\t\tthis.side_texture_top = new THREE.TextureLoader().load(advent_side_top)\r\n\t\tthis.side_texture_bottom = new THREE.TextureLoader().load(advent_side_bottom)\r\n\t\tthis.rear_texture = new THREE.TextureLoader().load(cardboard_rear)\r\n\t\t// this.front_texture.needsUpdate = true;\r\n\t\t\r\n\t\tthis.confetti_group = []\r\n\t\t\r\n\t\tthis.doorStates = []\r\n\t\tfor (var k = 0; k < 25; k++) {\r\n\t\t\tthis.doorStates.push(\r\n\t\t\t\t{\r\n\t\t\t\t\topen: false,\r\n\t\t\t\t\tisMoving: false,\r\n\t\t\t\t\tpanelSound: [true, true, true, true, true],\r\n\t\t\t\t\tmasterValue: 0\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\tconst loadSound = (src) => {\r\n\t\t\tvar sound = document.createElement(\"audio\");\r\n\t\t\tsound.src = src\r\n\t\t\tsound.setAttribute(\"preload\", \"auto\");\r\n\t\t\t// sound.setAttribute(\"controls\", \"none\");\r\n\t\t\tsound.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(sound);\r\n\t\t\treturn sound\r\n\t\t\t\r\n\t\t\t// var snd1  = new Audio();\r\n\t\t\t// var src1  = document.createElement(\"source\");\r\n\t\t\t// src1.type = \"audio/mpeg\";\r\n\t\t\t// src1.src  = src;\r\n\t\t\t// snd1.appendChild(src1);\r\n\t\t\t\r\n\t\t\t// return snd1\r\n\t\t\t\r\n\t\t\t// var sound = new Howl({\r\n\t\t\t  // src: [src]\r\n\t\t\t// });\r\n\t\t\t// return sound\r\n\t\t}\r\n\t\t\r\n\t\tthis.cardboardSound1 = loadSound(sound1)\r\n\t\tthis.cardboardSound2 = loadSound(sound2)\r\n\t\tthis.cardboardSound3 = loadSound(sound3)\r\n\t\tthis.cardboardSound4 = loadSound(sound4)\r\n\t\tthis.cardboardSound5 = loadSound(sound5)\r\n\t\t\r\n\t\tthis.cheerSound = loadSound(sound_cheer)\r\n\t\t\r\n\t\t// console.log(this.cardboardSound1)\r\n\t\t\r\n\t\t\r\n\t\tconst canvas = this.canvas\r\n\t\t// const renderer = new THREE.WebGLRenderer({canvas});\r\n\t\tconst renderer = new THREE.WebGLRenderer({canvas, alpha: true});\r\n\t\trenderer.autoClearColor = false;\r\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\r\n\t\tdocument.body.appendChild( renderer.domElement );\r\n\r\n\r\n\t\tconst scene = new THREE.Scene();\r\n\t\tconst camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );\r\n\t\tconst controls = new OrbitControls( camera, renderer.domElement );\r\n\t\tcontrols.minDistance = 1;\r\n\t\tcontrols.maxDistance = 20;\r\n\t\tcontrols.keys = {\r\n\t\t\t  LEFT: 37, //left arrow\r\n\t\t\t  UP: 38, // up arrow\r\n\t\t\t  RIGHT: 39, // right arrow\r\n\t\t\t  BOTTOM: 40 // down arrow\r\n\t\t\t};\r\n\t\tcontrols.minPolarAngle = Math.PI/4; // radians\r\n\t\tcontrols.maxPolarAngle = 3*Math.PI/4; // radians\r\n\r\n\t\tcontrols.minAzimuthAngle = - Math.PI/4; // radians\r\n\t\tcontrols.maxAzimuthAngle = Math.PI/4; // radians\r\n\r\n\t\tvar minPan = new THREE.Vector3( - 7, - 10, 0 );\r\n\t\tvar maxPan = new THREE.Vector3( 7, 10, 0 );\r\n\r\n\t\tcontrols.addEventListener(\"change\", function() {\r\n\t\t\tvar v = new THREE.Vector3().copy(controls.target);\r\n\t\t\tcontrols.target.clamp(minPan, maxPan);\r\n\t\t\tv.sub(controls.target);\r\n\t\t\tcamera.position.sub(v);\r\n\t\t})\r\n\r\n\r\n\r\n\t\t// const geometry = new THREE.PlaneGeometry( 13, 22, 1, 1 );\r\n\t\tconst frontPanel = createAdventFrontPanel(this.front_texture)\r\n\t\tscene.add( frontPanel )\r\n\t\t\r\n\t\tconst sidePanelLeft = createSidePanelLeft(this.side_texture_left)\r\n\t\tconst sidePanelLeft_inner = createSidePanelLeft(false)\r\n\t\tscene.add( sidePanelLeft )\r\n\t\tscene.add( sidePanelLeft_inner )\r\n\t\t\r\n\t\tconst sidePanelRight = createSidePanelRight(this.side_texture_right)\r\n\t\tconst sidePanelRight_inner = createSidePanelRight(false)\r\n\t\tscene.add( sidePanelRight )\r\n\t\tscene.add( sidePanelRight_inner )\r\n\t\t\r\n\t\tconst sidePanelTop = createSidePanelTop(this.side_texture_top)\r\n\t\tconst sidePanelTop_inner = createSidePanelTop(false)\r\n\t\tscene.add( sidePanelTop )\r\n\t\tscene.add( sidePanelTop_inner )\r\n\t\t\r\n\t\tconst sidePanelBottom = createSidePanelBottom(this.side_texture_bottom)\r\n\t\tconst sidePanelBottom_inner = createSidePanelBottom(false)\r\n\t\tscene.add( sidePanelBottom )\r\n\t\tscene.add( sidePanelBottom_inner )\r\n\t\t\r\n\t\tconst rearPanel = createBackPanel(this.rear_texture)\r\n\t\tscene.add( rearPanel )\r\n\t\t\r\n\t\tthis.doorArrays = []\r\n\t\tthis.doorsAndOutlineArray = []\r\n\t\tthis.doorArrayFront = []\r\n\t\tthis.doorArrayBack = []\r\n\t\tthis.doorPositions = []\r\n\t\t\r\n\t\tfor (var i = 0; i < 6; i++) {\r\n\t\t\tfor (var j = 0; j < 4; j++) {\r\n\t\t\t\tvar door = createDoor(i, j, this.front_texture, this.back_texture)\r\n\t\t\t\t// console.log(door[0])\r\n\t\t\t\tdoor[0].door_id = 4*i + j\r\n\t\t\t\tdoor[1].door_id = 4*i + j\r\n\t\t\t\tscene.add( door[0] )\r\n\t\t\t\tthis.doorArrayFront.push( scene.children[scene.children.length-1] )\r\n\t\t\t\tthis.doorArrays.push( scene.children[scene.children.length-1] )\r\n\t\t\t\tthis.doorsAndOutlineArray.push( scene.children[scene.children.length-1] )\r\n\t\t\t\tconst helper = new THREE.SkeletonHelper( door[0] );\r\n\t\t\t\tscene.add( helper )\r\n\t\t\t\t\r\n\t\t\t\tscene.add( door[1] )\r\n\t\t\t\tthis.doorArrayBack.push( scene.children[scene.children.length-1] )\r\n\t\t\t\tthis.doorArrays.push( scene.children[scene.children.length-1] )\r\n\t\t\t\tthis.doorsAndOutlineArray.push( scene.children[scene.children.length-1] )\r\n\t\t\t\t\r\n\t\t\t\tthis.doorPositions.push( door[2] )\r\n\t\t\t\t\r\n\t\t\t\tvar door_outline = createDoorOutline(i, j, this.front_texture)\r\n\t\t\t\tdoor_outline[0].door_id = 4*i + j\r\n\t\t\t\tscene.add( door_outline[0] )\r\n\t\t\t\tthis.doorsAndOutlineArray.push( scene.children[scene.children.length-1] )\r\n\t\t\t\t\r\n\t\t\t\tscene.add( door_outline[1] )\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\ti = 6\r\n\t\tj = 2\r\n\t\tvar door = createDoor(i, j, this.front_texture, this.back_texture)\r\n\t\tdoor[0].door_id = 24\r\n\t\tdoor[1].door_id = 24\r\n\t\tscene.add( door[0] )\r\n\t\tthis.doorArrayFront.push( scene.children[scene.children.length-1] )\r\n\t\tthis.doorArrays.push( scene.children[scene.children.length-1] )\r\n\t\tthis.doorsAndOutlineArray.push( scene.children[scene.children.length-1] )\r\n\t\tconst helper = new THREE.SkeletonHelper( door[0] );\r\n\t\tscene.add( helper )\r\n\t\t\r\n\t\tscene.add( door[1] )\r\n\t\tthis.doorArrayBack.push( scene.children[scene.children.length-1] )\r\n\t\tthis.doorArrays.push( scene.children[scene.children.length-1] )\r\n\t\tthis.doorsAndOutlineArray.push( scene.children[scene.children.length-1] )\r\n\t\t\r\n\t\tthis.doorPositions.push( door[2] )\r\n\t\t\r\n\t\tvar door_outline = createDoorOutline(i, j, this.front_texture)\r\n\t\tdoor_outline[0].door_id = 24\r\n\t\tscene.add( door_outline[0] )\r\n\t\tthis.doorsAndOutlineArray.push( scene.children[scene.children.length-1] )\r\n\t\t\r\n\t\tscene.add( door_outline[1] )\r\n\t\t\r\n\t\t\r\n\t\tvar testDragGeom = new THREE.Geometry();\r\n\t\ttestDragGeom.vertices.push(new THREE.Vector3(-100, -100, 0))\r\n\t\ttestDragGeom.vertices.push(new THREE.Vector3(100, -100, 0))\r\n\t\ttestDragGeom.vertices.push(new THREE.Vector3(100, 100, 0))\r\n\t\ttestDragGeom.vertices.push(new THREE.Vector3(-100, 100, 0))\r\n\t\t\r\n\t\ttestDragGeom.faces.push(new THREE.Face3( 0, 3, 2 ))\r\n\t\ttestDragGeom.faces.push(new THREE.Face3( 0, 2, 1 ))\r\n\t\t\r\n\t\tconst testDragMat = new THREE.MeshBasicMaterial( { color: 0xffffff, visible: false, wireframe: true, side: THREE.DoubleSide } );\r\n\t\t\r\n\t\tconst testDragMesh = new THREE.Mesh( testDragGeom, testDragMat )\r\n\t\tscene.add( testDragMesh )\r\n\t\tthis.testDragPanel = scene.children[scene.children.length-1]\r\n\t\t\r\n\t\t// var testDragGeomView = new THREE.Geometry();\r\n\t\t// testDragGeomView.vertices.push(new THREE.Vector3(-0.65, 0, 0.01))\r\n\t\t// testDragGeomView.vertices.push(new THREE.Vector3(2.4, 0, 0.01))\r\n\t\t// testDragGeomView.vertices.push(new THREE.Vector3(2.4, 1, 0.01))\r\n\t\t// testDragGeomView.vertices.push(new THREE.Vector3(-0.65, 1, 0.01))\r\n\t\t\r\n\t\t// testDragGeomView.faces.push(new THREE.Face3( 0, 3, 2 ))\r\n\t\t// testDragGeomView.faces.push(new THREE.Face3( 0, 2, 1 ))\r\n\t\t\r\n\t\t// const testDragMatView = new THREE.MeshBasicMaterial( { color: 0x00ff00, wireframe: true, side: THREE.DoubleSide } );\r\n\t\t\r\n\t\t// const testDragMeshView = new THREE.Mesh( testDragGeomView, testDragMatView )\r\n\t\t// scene.add( testDragMeshView )\r\n\t\t\r\n\t\t// console.log(camera)\r\n\r\n\t\tcamera.position.z = 20;\r\n\t\tcontrols.update();\r\n\r\n\t\t// var snow = snowEffectParticles()\r\n\t\tscene.add(snowEffectParticles);\r\n\r\n\r\n\t\tconst onResize = () => {\r\n\t\t\tconst width = window.innerWidth;\r\n\t\t\tconst height = window.innerHeight;\r\n\t\t\trenderer.setPixelRatio(window.devicePixelRatio);\r\n\t\t\trenderer.setSize(width, height);\r\n\t\t\tcamera.aspect = width / height;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\t\t}\r\n\t\twindow.addEventListener('resize', onResize);\r\n\t\t\r\n\t\t\r\n\t\tconst raycaster = new THREE.Raycaster();\r\n\r\n\t\tconst checkMouseIntersection = (event) => {\r\n\t\t\t\r\n\t\t\tif (camera.position.z > 5.5) {return}\r\n\t\t\t// console.log(event)\r\n\t\t\tvar mouse = new THREE.Vector2();\r\n\t\t\tif (event.type === \"mousedown\") {\r\n\t\t\t\t\r\n\t\t\t\tmouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\r\n\t\t\t\tmouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\r\n\t\t\t} else if (event.type === \"touchstart\") {\r\n\t\t\t\tmouse.x = ( event.touches[0].clientX / window.innerWidth ) * 2 - 1;\r\n\t\t\t\tmouse.y = - ( event.touches[0].clientY  / window.innerHeight ) * 2 + 1;\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// console.log(mouse)\r\n\t\t\t\r\n\t\t\tvar intersects\r\n\t\t\tthis.currentDoor = null\r\n\t\t\tthis.currentDoor_initialx = null\r\n\t\t\tthis.currentDoor_initialMasterValue = null\r\n\t\t\tthis.anyDoorMoving = false\r\n\t\t\t// update the picking ray with the camera and mouse position\r\n\t\t\traycaster.setFromCamera( mouse, camera );\r\n\t\t\t// scene.add(new THREE.ArrowHelper(raycaster.ray.direction, raycaster.ray.origin, 300, 0x00ff00) );\r\n\t\t\t// calculate objects intersecting the picking ray\r\n\t\t\tif (this.doorArrayFront) {\r\n\t\t\t\tintersects = raycaster.intersectObjects( this.doorArrays, true );\r\n\t\t\t\t// console.log(intersects)\r\n\t\t\t\tfor (var i = 0; i < intersects.length; i++) {\r\n\t\t\t\t\t// if (getTabFaceIndexArray().includes(intersects[i].faceIndex)) {\r\n\t\t\t\t\t\t// console.log(intersects)\r\n\t\t\t\t\t\t// console.log(intersects[0].object.door_id)\r\n\t\t\t\t\t\tvar door_id = intersects[i].object.door_id\r\n\t\t\t\t\t\tif (!this.anyDoorMoving) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// console.log(this.doorState)\r\n\t\t\t\t\t\t\tvar initialDoorMasterValue = this.doorStates[door_id].masterValue\r\n\t\t\t\t\t\t\tif (this.testDragPanel) {\r\n\t\t\t\t\t\t\t\tvar drag_intersect = raycaster.intersectObjects( [this.testDragPanel] )\r\n\t\t\t\t\t\t\t\tif (drag_intersect.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tcontrols.enableRotate = false;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// console.log('initial')\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// console.log(drag_intersect[0].point.x)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.currentDoor = door_id\r\n\t\t\t\t\t\t\t\t\tthis.currentDoor_initialx = drag_intersect[0].point.x\r\n\t\t\t\t\t\t\t\t\tthis.currentDoor_initialMasterValue = initialDoorMasterValue\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (event.type === \"mousedown\") {\r\n\t\t\t\t\t\t\t\t\t\tthis.canvas.addEventListener( 'mousemove', openDoor, false );\r\n\t\t\t\t\t\t\t\t\t\tthis.canvas.addEventListener( 'mouseup', endOpenDoor, false );\r\n\t\t\t\t\t\t\t\t\t} else if (event.type === \"touchstart\") {\r\n\t\t\t\t\t\t\t\t\t\tthis.canvas.addEventListener( 'touchmove', openDoor, false );\r\n\t\t\t\t\t\t\t\t\t\tthis.canvas.addEventListener( 'touchend', endOpenDoor, false );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// if (this.testDragPanel) {\r\n\t\t\t\t// intersects = raycaster.intersectObjects( [this.testDragPanel] );\r\n\t\t\t\t// if (intersects.length > 0) {\r\n\t\t\t\t\t// console.log(intersects)\r\n\t\t\t\t\t// controls.enableRotate = false;\r\n\t\t\t\t// }\r\n\t\t\t// }\r\n\r\n\t\t}\r\n\t\t\r\n\t\tconst endOpenDoor = (event) => {\r\n\t\t\t\r\n\t\t\tvar door = this.currentDoor\r\n\t\t\t\r\n\t\t\tif (this.doorStates[door].masterValue !== 1 && this.doorStates[door].masterValue !== 0) {\r\n\t\t\t\tvar target\r\n\t\t\t\tvar time\r\n\t\t\t\tif (this.doorStates[door].masterValue > 0.5) {\r\n\t\t\t\t\ttarget = 1\r\n\t\t\t\t\ttime = Math.abs(this.doorStates[door].masterValue - 1) * 2000\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget = 0\r\n\t\t\t\t\ttime = Math.abs(this.doorStates[door].masterValue - 0) * 2000\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// console.log(target)\r\n\t\t\t\t// console.log(time)\r\n\t\t\t\r\n\t\t\t\tthis.anyDoorMoving = true\r\n\t\t\t\t\r\n\t\t\t\tnew TWEEN.Tween( this.doorStates[door] )\r\n\t\t\t\t\t.to({masterValue: target}, time)\r\n\t\t\t\t\t.easing(TWEEN.Easing.Sinusoidal.Out)\r\n\t\t\t\t\t.onUpdate(() => {\r\n\t\t\t\t\t\tadjustDoorAngle(door, this.doorStates[door].masterValue)\r\n\t\t\t\t\t })\r\n\t\t\t\t\t.onComplete(() => {\r\n\t\t\t\t\t\tthis.anyDoorMoving =false\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.start()\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tthis.canvas.removeEventListener( 'mousemove', openDoor, false );\r\n\t\t\tthis.canvas.removeEventListener( 'touchmove', openDoor, false );\r\n\t\t\tthis.canvas.removeEventListener( 'mouseup', endOpenDoor, false );\r\n\t\t\tthis.canvas.removeEventListener( 'touchend', endOpenDoor, false );\r\n\t\t}\r\n\t\t\r\n\t\tconst openDoor = (event) => {\r\n\t\t\t\r\n\t\t\tvar door = this.currentDoor\r\n\t\t\tvar initial_x = this.currentDoor_initialx\r\n\t\t\tvar initial_door = this.currentDoor_initialMasterValue\r\n\t\t\t\r\n\t\t\t// console.log('here')\r\n\t\t\t\r\n\t\t\tconst DOOR_OPEN_WIDTH = 3.05 // equivalent to door open fraction of 1\r\n\t\t\t\r\n\t\t\tconst DOOR_OPEN_MAX = 1.2\r\n\t\t\t\r\n\t\t\tconst DOOR_OPEN_MIN = 0\r\n\t\t\t\r\n\t\t\tvar mouse = new THREE.Vector2();\r\n\t\t\tif (event.type === \"mousemove\") {\r\n\t\t\t\tmouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\r\n\t\t\t\tmouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\r\n\t\t\t} else if (event.type === \"touchmove\") {\r\n\t\t\t\tmouse.x = ( event.touches[0].clientX / window.innerWidth ) * 2 - 1;\r\n\t\t\t\tmouse.y = - ( event.touches[0].clientY  / window.innerHeight ) * 2 + 1;\t\r\n\t\t\t}\r\n\t\t\traycaster.setFromCamera( mouse, camera );\r\n\t\t\tif (this.testDragPanel) {\r\n\t\t\t\tvar drag_intersect = raycaster.intersectObjects( [this.testDragPanel] )\r\n\t\t\t\tif (drag_intersect.length > 0) {\r\n\t\t\t\t\tvar new_x = drag_intersect[0].point.x\r\n\t\t\t\t\tvar masterValue = initial_door + (initial_x-new_x) / DOOR_OPEN_WIDTH\r\n\t\t\t\t\t// console.log(masterValue)\r\n\t\t\t\t\t\r\n\t\t\t\t\tmasterValue = Math.min(DOOR_OPEN_MAX, masterValue)\r\n\t\t\t\t\tmasterValue = Math.max(DOOR_OPEN_MIN, masterValue)\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tadjustDoorAngle(door, masterValue)\r\n\t\t\t\t\t\r\n\t\t\t\t\t// if (masterValue > 0.05 && this.doorStates[door].panelSound[0]) {this.cardboardSound1.pause(); this.cardboardSound1.currentTime=0; this.cardboardSound1.play(); this.doorStates[door].panelSound[0] = false}\r\n\t\t\t\t\t// if (masterValue > 0.2 && this.doorStates[door].panelSound[1]) {this.cardboardSound2.pause(); this.cardboardSound2.currentTime=0; this.cardboardSound2.play(); this.doorStates[door].panelSound[1] = false}\r\n\t\t\t\t\t// if (masterValue > 0.3 && this.doorStates[door].panelSound[2]) {this.cardboardSound3.pause(); this.cardboardSound3.currentTime=0; this.cardboardSound3.play(); this.doorStates[door].panelSound[2] = false}\r\n\t\t\t\t\t// if (masterValue > 0.55 && this.doorStates[door].panelSound[3]) {this.cardboardSound4.pause(); this.cardboardSound4.currentTime=0; this.cardboardSound4.play(); this.doorStates[door].panelSound[3] = false}\r\n\t\t\t\t\t// if (masterValue > 0.7 && this.doorStates[door].panelSound[4]) {this.cardboardSound5.pause(); this.cardboardSound5.currentTime=0; this.cardboardSound5.play(); this.doorStates[door].panelSound[4] = false}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// console.log(masterValue)\r\n\t\t\t\t\t// console.log(masterValue >= 0.99 && !this.doorStates[door].open)\r\n\t\t\t\t\t// if (masterValue >= 0.99 && !this.doorStates[door].open) {console.log('yay'); this.cheerSound.pause(); this.cheerSound.currentTime=0; this.cheerSound.play(); this.doorStates[door].open = true}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tthis.doorStates[door].masterValue = masterValue\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tconst adjustDoorBoneAngle = (door = 0, bone=0, value=0) => {\r\n\t\t\tif (this.doorArrayFront && this.doorArrayBack) {\r\n\t\t\t\tthis.doorArrayFront[door].skeleton.bones[bone].rotation.y = -value;\r\n\t\t\t\t// fix by using this with custom raycasting check\r\n\t\t\t\t// https://stackoverflow.com/questions/57332347/three-js-get-updated-vertices-with-skeletal-animations\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tconst adjustDoorAngle = (door, masterValue) => {\r\n\t\t\t\r\n\t\t\tvar valueObj0 = {\r\n\t\t\t\tfrac: [0, 0.7, 1, 1.2],\r\n\t\t\t\toutcome: [0, 0, 2, 3]\r\n\t\t\t}\r\n\r\n\t\t\tvar valueObj1 = {\r\n\t\t\t\tfrac: [0, 0.55, 0.7, 1, 1.2],\r\n\t\t\t\toutcome: [0, 0, 1.1, 0.8, 0]\r\n\t\t\t}\r\n\r\n\t\t\tvar valueObj2 = {\r\n\t\t\t\tfrac: [0, 0.3, 0.55, 0.7, 1, 1.2],\r\n\t\t\t\toutcome: [0, 0, 1.1, 0.5, 0.4, 0]\r\n\t\t\t}\r\n\r\n\t\t\tvar valueObj3 = {\r\n\t\t\t\tfrac: [0, 0.2, 0.3, 0.55, 1, 1.2],\r\n\t\t\t\toutcome: [0, 0, 1.1, 0.3, 0.2, 0]\r\n\t\t\t}\r\n\r\n\t\t\tvar valueObj4 = {\r\n\t\t\t\tfrac: [0, 0.05, 0.2, 0.3, 1, 1.2],\r\n\t\t\t\toutcome: [0, 0, 1.1, 0.3, 0.2, 0]\r\n\t\t\t}\r\n\r\n\t\t\tvar valueObj5 = {\r\n\t\t\t\tfrac: [0, 0.05, 0.4, 0.5, 1, 1.2],\r\n\t\t\t\toutcome: [0, 2, 2, 1.5, 0, 0]\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tadjustDoorBoneAngle(door, 0, getSliderValue(masterValue, valueObj0))\r\n\t\t\tadjustDoorBoneAngle(door, 1, getSliderValue(masterValue, valueObj1))\r\n\t\t\tadjustDoorBoneAngle(door, 2, getSliderValue(masterValue, valueObj2))\r\n\t\t\tadjustDoorBoneAngle(door, 3, getSliderValue(masterValue, valueObj3))\r\n\t\t\tadjustDoorBoneAngle(door, 4, getSliderValue(masterValue, valueObj4))\r\n\t\t\tadjustDoorBoneAngle(door, 5, getSliderValue(masterValue, valueObj5))\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (masterValue > 0.05 && this.doorStates[door].panelSound[0]) {this.cardboardSound1.pause(); this.cardboardSound1.currentTime=0; this.cardboardSound1.play(); this.doorStates[door].panelSound[0] = false}\r\n\t\t\tif (masterValue > 0.2 && this.doorStates[door].panelSound[1]) {this.cardboardSound2.pause(); this.cardboardSound2.currentTime=0; this.cardboardSound2.play(); this.doorStates[door].panelSound[1] = false}\r\n\t\t\tif (masterValue > 0.3 && this.doorStates[door].panelSound[2]) {this.cardboardSound3.pause(); this.cardboardSound3.currentTime=0; this.cardboardSound3.play(); this.doorStates[door].panelSound[2] = false}\r\n\t\t\tif (masterValue > 0.55 && this.doorStates[door].panelSound[3]) {this.cardboardSound4.pause(); this.cardboardSound4.currentTime=0; this.cardboardSound4.play(); this.doorStates[door].panelSound[3] = false}\r\n\t\t\tif (masterValue > 0.7 && this.doorStates[door].panelSound[4]) {this.cardboardSound5.pause(); this.cardboardSound5.currentTime=0; this.cardboardSound5.play(); this.doorStates[door].panelSound[4] = false}\r\n\t\t\t\r\n\t\t\tif (masterValue >= 0.99 && !this.doorStates[door].open) {\r\n\t\t\t\tthis.cheerSound.pause(); this.cheerSound.currentTime=0; this.cheerSound.play(); this.doorStates[door].open = true\r\n\t\t\t\t\r\n\t\t\t\tvar confetti_r = new ExplosionConfetti(\r\n\t\t\t\t\t{}, \r\n\t\t\t\t\tnew THREE.Vector3(this.doorPositions[door][0]+0, this.doorPositions[door][1]+0.2, 0.1),\r\n\t\t\t\t\tnew THREE.Vector3(0, 0, 0.5)\r\n\t\t\t\t);\r\n\t\t\t\tscene.add(confetti_r)\r\n\t\t\t\tthis.confetti_group.push(confetti_r)\r\n\t\t\t\t\r\n\t\t\t\tvar confetti_l = new ExplosionConfetti(\r\n\t\t\t\t\t{}, \r\n\t\t\t\t\tnew THREE.Vector3(this.doorPositions[door][0]-0, this.doorPositions[door][1]+0.2, 0.1),\r\n\t\t\t\t\tnew THREE.Vector3(0, 0, -0.5)\r\n\t\t\t\t);\r\n\t\t\t\tscene.add(confetti_l)\r\n\t\t\t\tthis.confetti_group.push(confetti_l)\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tconst getSliderValue = (masterValue, sliderObj) => {\r\n\t\t  if (masterValue === 0) {return sliderObj.outcome[0]}\r\n\t\t  \r\n\t\t  var indexUpper = sliderObj.frac.findIndex(x => x >= masterValue)\r\n\t\t  var indexLower = indexUpper - 1\r\n\t\t  \r\n\t\t  var fraction = (masterValue - sliderObj.frac[indexLower]) / (sliderObj.frac[indexUpper] - sliderObj.frac[indexLower])\r\n\t\t  \r\n\t\t  var output = sliderObj.outcome[indexLower] + fraction*(sliderObj.outcome[indexUpper] - sliderObj.outcome[indexLower])\r\n\t\t  \r\n\t\t  return output\r\n\t\t  \r\n\t\t  \r\n\t\t}\r\n\t\t\r\n\t\tthis.isMouseDragging = false\r\n\t\tthis.isCameraPosMoving = false\r\n\t\tthis.isCameraRotMoving = false\r\n\t\t\r\n\t\tconst isDragging = () => {\r\n\t\t\tthis.isMouseDragging = true\r\n\t\t}\r\n\t\tconst stopDragCheck = () => {\r\n\t\t\tthis.canvas.removeEventListener( 'mousemove', isDragging, false );\r\n\t\t\tthis.canvas.removeEventListener( 'mouseup', stopDragCheck, false );\t\r\n\t\t\t\r\n\t\t}\r\n\t\tconst checkForDrag = () => {\r\n\t\t\tthis.isMouseDragging = false\r\n\t\t\tthis.canvas.addEventListener( 'mousemove', isDragging, false );\r\n\t\t\tthis.canvas.addEventListener( 'mouseup', stopDragCheck, false );\t\r\n\t\t}\r\n\t\t\r\n\t\tconst stopWheelZoom = (e) => {\r\n\t\t\te.preventDefault()\r\n\t\t}\r\n\t\t\r\n\t\tconst moveToDoor = (event) => {\r\n\t\t\t\r\n\t\t\tvar mouse = new THREE.Vector2();\r\n\t\t\tmouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\r\n\t\t\tmouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\t\t\t\r\n\t\t\tvar raycaster = new THREE.Raycaster();\r\n\t\t\traycaster.setFromCamera( mouse, camera );\r\n\t\t\tvar intersects = raycaster.intersectObjects( this.doorsAndOutlineArray, true )\r\n\t\t\t\r\n\t\t\tif (intersects.length > 0) {\r\n\t\t\t\tvar door_id = intersects[0].object.door_id\r\n\t\t\t\r\n\t\t\t\tvar target_pos = new THREE.Vector3(this.doorPositions[door_id][0], this.doorPositions[door_id][1], 4.5);\r\n\t\t\t\tvar target_controls = new THREE.Vector3(this.doorPositions[door_id][0], this.doorPositions[door_id][1], 0);\r\n\t\t\t\t\r\n\t\t\t\tif (!this.isCameraPosMoving) {\r\n\t\t\t\t\tcontrols.enabled = false;\r\n\t\t\t\t\tthis.isCameraPosMoving = true\r\n\t\t\t\t\tthis.canvas.addEventListener( 'wheel', stopWheelZoom, false );\r\n\t\t\t\t\tnew TWEEN.Tween( camera.position )\r\n\t\t\t\t\t\t.to({ x: target_pos.x, y: target_pos.y, z: target_pos.z }, 1000)\r\n\t\t\t\t\t\t.easing(TWEEN.Easing.Quadratic.In)\r\n\t\t\t\t\t\t.onUpdate(() => {\r\n\t\t\t\t\t\t\tcontrols.update()\r\n\t\t\t\t\t\t })\r\n\t\t\t\t\t\t.onComplete(() => {\r\n\t\t\t\t\t\t\tcontrols.enabled = true;\r\n\t\t\t\t\t\t\tcontrols.update()\r\n\t\t\t\t\t\t\tthis.isCameraPosMoving = false\r\n\t\t\t\t\t\t\tthis.canvas.removeEventListener( 'wheel', stopWheelZoom, false );\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.start()\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.isCameraRotMoving) {\r\n\t\t\t\t\tcontrols.enabled = false;\r\n\t\t\t\t\tthis.isCameraRotMoving = true\r\n\t\t\t\t\tthis.canvas.addEventListener( 'wheel', stopWheelZoom, false );\r\n\t\t\t\t\tnew TWEEN.Tween( controls.target )\r\n\t\t\t\t\t\t.to({ x: target_controls.x, y: target_controls.y, z: target_controls.z }, 1000)\r\n\t\t\t\t\t\t.easing(TWEEN.Easing.Quadratic.In)\r\n\t\t\t\t\t\t.onUpdate(() => {\r\n\t\t\t\t\t\t\tcontrols.update()\r\n\t\t\t\t\t\t })\r\n\t\t\t\t\t\t.onComplete(() => {\r\n\t\t\t\t\t\t\tcontrols.enabled = true;\r\n\t\t\t\t\t\t\tcontrols.update()\r\n\t\t\t\t\t\t\tthis.isCameraRotMoving = false\r\n\t\t\t\t\t\t\tthis.canvas.removeEventListener( 'wheel', stopWheelZoom, false );\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.start()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t\r\n\t\tconst onClick = (e) => {\r\n\t\t\tif (camera.position.z <5 || this.isMouseDragging) {return}\r\n\t\t\tmoveToDoor(e)\r\n\t\t}\r\n\t\t\r\n\t\tconst onDblClick = (e) => {\r\n\t\t\te.preventDefault()\r\n\t\t\tif (camera.position.z >= 5 || this.isMouseDragging) {return}\r\n\t\t\tmoveToDoor(e)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tthis.canvas.addEventListener( 'click', onClick, false)\r\n\t\tthis.canvas.addEventListener( 'dblclick', onDblClick, false)\r\n\t\tthis.canvas.addEventListener( 'mousedown', checkForDrag, false );\t\r\n\t\tthis.canvas.addEventListener( 'mousedown', checkMouseIntersection, false );\r\n\t\tthis.canvas.addEventListener( 'mouseup', () => {controls.enableRotate = true}, false);\r\n\t\tthis.canvas.addEventListener( 'touchstart', checkMouseIntersection, false );\r\n\t\tthis.canvas.addEventListener( 'touchend', () => {controls.enableRotate = true}, false );\r\n\t\t\r\n\t\t// this.canvas.addEventListener( 'touchstart', (event) => {console.log([event.touches[0].clientX, event.touches[0].clientY]) })\r\n\t\t// this.canvas.addEventListener( 'mousedown', (event) => {console.log([event.clientX, event.clientY]) })\r\n\t\r\n\r\n\t\tconst animate = (timeStamp) => {\r\n\t\t\tif (this.props.play) {\r\n\t\t\t\trequestAnimationFrame( this.animate );\r\n\t\t\t}\r\n\r\n\t\t\t// line.rotation.x += 0.01;\r\n\t\t\t// line.rotation.y += 0.01;\r\n\t\t\t\r\n\t\t\tcontrols.update();\r\n\t\t\t\r\n\t\t\t// console.log(camera.position)\r\n\t\t\t\r\n\t\t\tupdateSnowEffectParticles(snowEffectParticles, timeStamp)\r\n\t\t\t\r\n\t\t\t// checkMouseIntersection()\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < this.confetti_group.length; i++) {\r\n\t\t\t\tthis.confetti_group[i].update()\r\n\t\t\t}\r\n\r\n\t\t\tTWEEN.update();\r\n\t\t\trenderer.render( scene, camera );\r\n\t\t};\r\n\t\t\r\n\t\tthis.scene = scene\r\n\t\t\r\n\t\tthis.animate = animate\r\n\t\t\r\n\t\t\r\n\t\t// requestAnimationFrame(this.animate);\r\n\t\t\r\n\t\tthis.setState({update: !this.state.update})\r\n\r\n\t}\r\n\t\r\n\t// requestAnimationFrame = () => {\r\n\t\t// if (this.animate) {\r\n\t\t\t// requestAnimationFrame(this.animate);\r\n\t\t// }\r\n\t// }\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tif (this.props.play) {\r\n\t\t\tif (this.animate) {\r\n\t\t\t\trequestAnimationFrame( this.animate );\r\n\t\t\t}\r\n\t\t} \r\n\t\t\r\n\t\treturn(\r\n\t\t\t<canvas id='c' ref={ref => (this.canvas = ref)}/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default Calendar3D;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAAbFCAYAAADGHH51AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAexQAAHsUBPJTTQQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABFESURBVHic7dwhDgJBEEXB3g0KxVE5BAdG4EgWFB41j4SqC/wRLy1nm5nXwGJ7/QD+k/BICI+E8EgIj4TwSAiPhPBICI+E8EgIj4TwSAiPhPBICI+E8EgIj4TwSAiPhPBICI+E8EgIj4TwSAiPhPBInFaObTNz2bX+i+7HsfQvk6XhnWbmej6vnORLt8djngv3nB8SwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiOxzcxr5dhl1/ovuh/HuhBmcXjw4fyQEB4J4ZEQHgnhkRAeCeGREB4J4ZEQHgnhkRAeCeGREB4J4ZEQHgnhkRAeCeGREB4J4ZEQHgnhkRAeCeGREB6JNyATHHgz47YRAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAAbFCAYAAADGHH51AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAexQAAHsUBPJTTQQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABFESURBVHic7dwhDgJBEEXB3g0KxVE5BAdG4EgWFB41j4SqC/wRLy1nm5nXwGJ7/QD+k/BICI+E8EgIj4TwSAiPhPBICI+E8EgIj4TwSAiPhPBICI+E8EgIj4TwSAiPhPBICI+E8EgIj4TwSAiPhPBInFaObTNz2bX+i+7HsfQvk6XhnWbmej6vnORLt8djngv3nB8SwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiMhPBLCIyE8EsIjITwSwiOxzcxr5dhl1/ovuh/HuhBmcXjw4fyQEB4J4ZEQHgnhkRAeCeGREB4J4ZEQHgnhkRAeCeGREB4J4ZEQHgnhkRAeCeGREB4J4ZEQHgnhkRAeCeGREB6JNyATHHgz47YRAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAACeCAYAAACsPnijAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAexQAAHsUBPJTTQQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQ9SURBVHic7duxTQNBFEXRb9ZyBcRItELhtIJE7IzM0q6pgsHyPaeBN+nc0Zxm5j4AAADAU3v57wMAAAAAf08AAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgIDzyrGPy2VeXzQHAAAAuB7HfN5uy/aWBoD3bZu3bVs5CQAAAA/pe9+X7nmOBwAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAICA88qxr32fn/t95SQAAAA8pOtxLN07zYwbOQAAADw5XwAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAgF98GBUY3m+LgwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAACeCAYAAACsPnijAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAexQAAHsUBPJTTQQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQ9SURBVHic7duxTQNBFEXRb9ZyBcRItELhtIJE7IzM0q6pgsHyPaeBN+nc0Zxm5j4AAADAU3v57wMAAAAAf08AAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgIDzyrGPy2VeXzQHAAAAuB7HfN5uy/aWBoD3bZu3bVs5CQAAAA/pe9+X7nmOBwAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAICA88qxr32fn/t95SQAAAA8pOtxLN07zYwbOQAAADw5XwAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAAAEAAAAAAgQAAAAACBAAAAAAIEAAAAAAgAABAAAAAAIEAAAAAAgQAAAAACBAAAAAAIAAAQAAAAACBAAAAAAIEAAAAAAgQAAAAACAgF98GBUY3m+LgwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/modal_decor.bb3945ee.png\";","import React from 'react';\r\n\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nimport decor from \"../images/modal_decor.png\"\r\n\r\nclass SettingsModal extends React.Component {\r\n\tconstructor(props) {\r\n\t  super(props);\r\n\t  // Don't call this.setState() here!\r\n\t  this.state = { show: false };\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Button variant=\"primary\" onClick={() => {this.setState({show: true}); this.props.pauseAnimation()}} style={this.props.buttonStyle}>\r\n\t\t\t\t\tCustom Width Modal\r\n\t\t\t\t</Button>\r\n\t\t\t\t\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tshow={this.state.show}\r\n\t\t\t\t\tonHide={() => {this.setState({show: false}); this.props.playAnimation()}}\r\n\t\t\t\t\tdialogClassName=\"modal-90w\"\r\n\t\t\t\t\taria-labelledby=\"example-custom-modal-styling-title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<img src={decor} style={{width: '100%'}} alt=\"\"/>\r\n\t\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t\t<Modal.Title id=\"example-custom-modal-styling-title\">\r\n\t\t\t\t\t\t\tCustom Modal Styling\r\n\t\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tIpsum molestiae natus adipisci modi eligendi? Debitis amet quae unde\r\n\t\t\t\t\t\t\tcommodi aspernatur enim, consectetur. Cumque deleniti temporibus\r\n\t\t\t\t\t\t\tipsam atque a dolores quisquam quisquam adipisci possimus\r\n\t\t\t\t\t\t\tlaboriosam. Quibusdam facilis doloribus debitis! Sit quasi quod\r\n\t\t\t\t\t\t\taccusamus eos quod. Ab quos consequuntur eaque quo rem! Mollitia\r\n\t\t\t\t\t\t\treiciendis porro quo magni incidunt dolore amet atque facilis ipsum\r\n\t\t\t\t\t\t\tdeleniti rem!\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t</Modal>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t</>\r\n\t\t\t)\r\n\t}\r\n}\r\n\r\nexport default SettingsModal","\nimport wreath from \"./images/wreath.png\"\nimport React from 'react';\n\nimport Calendar3D from './components/Calendar3D'\nimport SettingsModal from './components/SettingsModal'\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"bootstrap-slider/dist/css/bootstrap-slider.css\"\nimport './styling.css'\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Don't call this.setState() here!\n\t\tthis.state = { playAnimation: true}\n\n\t}\n\t\n\tpauseAnimation = () => {\n\t\tthis.setState({playAnimation: false})\n\t}\n\t\n\tplayAnimation = () => {\n\t\tthis.setState({playAnimation: true})\n\t}\n  \n  \n  render() {\n\t  return (\n\t\t<div className=\"app-container\">\n\t\t\n\t\t  <Calendar3D \n\t\t\tplay={this.state.playAnimation}\n\t\t  />\n\t\t  \n\t\t  <div className=\"wreath-border left\">\n\t\t\t<img src={wreath} alt=\"\" />\n\t\t  </div>\n\t\t  <div className=\"wreath-border right\">\n\t\t\t<img src={wreath} alt=\"\" />\n\t\t  </div>\n\t\t  \n\t\t  <SettingsModal buttonStyle={{position: 'absolute', top: '50%'}} pauseAnimation={this.pauseAnimation} playAnimation={this.playAnimation} />\n\n\t\t</div>\n\t  )\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}